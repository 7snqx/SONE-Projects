/* ============================================
   Helios Occupancy - Exact Helios.pl Style
   ============================================ */

@import url("https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Rubik:wght@400;500;600;700&family=Varela+Round&display=swap");

:root {
  --helios-red: #e30613;
  --helios-red-dark: #c4050f;
  --helios-green: #00a651;
  --helios-green-dark: #008c45;
  --helios-navy: #1a1f36;

  --bg-page: #f8f9fa;
  --bg-white: #ffffff;
  --bg-dark: #1a1f36;
  --bg-card: #ffffff;

  --text-dark: #1a1f36;
  --text-body: #333333;
  --text-muted: #6c757d;
  --text-light: #999999;

  --border-color: #e5e5e5;
  --shadow-sm: 0 1px 3px rgba(0, 0, 0, 0.08);
  --shadow-md: 0 2px 8px rgba(0, 0, 0, 0.1);

  --font: "Inter", -apple-system, BlinkMacSystemFont, sans-serif;
}

/* Dark Mode */
[data-theme="dark"] {
  --bg-page: #0f1218;
  --bg-white: #1a1f2e;
  --bg-card: #252b3b;
  --bg-dark: #0f1218;

  --text-dark: #ffffff;
  --text-body: #e0e0e0;
  --text-muted: #9ca3af;
  --text-light: #6b7280;

  --border-color: #374151;
  --shadow-sm: 0 1px 3px rgba(0, 0, 0, 0.3);
  --shadow-md: 0 2px 8px rgba(0, 0, 0, 0.4);
}

/* Dark mode - Component overrides */
[data-theme="dark"] .day-picker-wrapper,
[data-theme="dark"] .day-btn,
[data-theme="dark"] .movie-card,
[data-theme="dark"] .hall-card,
[data-theme="dark"] .stat-card,
[data-theme="dark"] .prediction-box,
[data-theme="dark"] .collapsible-section,
[data-theme="dark"] .histogram-section,
[data-theme="dark"] .timeline-section,
[data-theme="dark"] .ai-insights-section,
[data-theme="dark"] .insight-card,
[data-theme="dark"] .history-modal-content,
[data-theme="dark"] .install-modal-content {
  background: var(--bg-card);
  color: var(--text-body);
}

[data-theme="dark"] .day-btn {
  border-color: var(--border-color);
}

[data-theme="dark"] .day-btn:not(.active) .day-label,
[data-theme="dark"] .day-btn:not(.active) .day-date {
  color: var(--text-muted);
}

[data-theme="dark"] .movie-card-content,
[data-theme="dark"] .hall-card-content {
  background: var(--bg-card);
}

[data-theme="dark"] .movie-title,
[data-theme="dark"] .hall-name,
[data-theme="dark"] .hall-movie-title,
[data-theme="dark"] .stat-value,
[data-theme="dark"] .prediction-value {
  color: #ffffff; /* Pure white for main text */
}

[data-theme="dark"] .movie-meta,
[data-theme="dark"] .hall-movie,
[data-theme="dark"] .stat-label,
[data-theme="dark"] .prediction-label,
[data-theme="dark"] .hall-status.empty {
  color: #a0aec0; /* Lighter gray for better contrast */
}

[data-theme="dark"] .hall-status-text {
  color: #4fd1c5; /* Bright teal for "TRWA SEANS" */
  font-weight: 700;
}

[data-theme="dark"] .hall-seats {
  background: rgba(255, 255, 255, 0.1);
  color: #e2e8f0;
}

[data-theme="dark"] .coming-soon-tab,
[data-theme="dark"] .history-tab {
  background: var(--bg-card);
  color: var(--text-body);
  border-color: var(--border-color);
}

[data-theme="dark"] .hall-progress-bg {
  background: rgba(255, 255, 255, 0.1);
}

[data-theme="dark"] .insight-card {
  border-color: var(--border-color);
}

.inline-icon {
  font-size: 1.1em;
  vertical-align: -0.25em;
  margin: 0 2px;
}

*,
*::before,
*::after {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}
html {
  font-size: 14px;
}

body {
  font-family: var(--font);
  background: var(--bg-page);
  color: var(--text-body);
  line-height: 1.5;
  min-height: 100vh;
}

.app {
  display: flex;
  flex-direction: column;
  min-height: 100vh;
}

/* Full-page loader overlay */
.full-page-loader {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: rgba(26, 31, 54, 0.95);
  backdrop-filter: blur(4px);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 9999;
  transition: opacity 0.3s ease;
}

.full-page-loader.hidden {
  opacity: 0;
  pointer-events: none;
}

.loader-content {
  text-align: center;
  color: white;
}

.loader-spinner {
  width: 48px;
  height: 48px;
  border: 4px solid rgba(255, 255, 255, 0.2);
  border-top-color: var(--helios-red);
  border-radius: 50%;
  animation: loaderSpin 1s linear infinite;
  margin: 0 auto 16px;
}

@keyframes loaderSpin {
  to {
    transform: rotate(360deg);
  }
}

.loader-content p {
  font-size: 1rem;
  color: rgba(255, 255, 255, 0.8);
}

.container {
  max-width: 1200px;
  margin: 0 auto;
  padding: 0 16px;
}

.material-symbols-rounded {
  font-variation-settings: "FILL" 0, "wght" 400, "GRAD" 0, "opsz" 24;
  vertical-align: -0.125em;
  line-height: 1;
  display: inline-flex;
  align-items: center;
  justify-content: center;
}

/* ============================================
   Header - Enhanced with Gradient + Glass
   ============================================ */

.header {
  background: linear-gradient(
    135deg,
    var(--helios-red) 0%,
    var(--helios-red-dark) 100%
  );
  position: sticky;
  top: 0;
  z-index: 1000;
  transition: background 0.3s ease, box-shadow 0.3s ease;
}

.header.scrolled {
  background: linear-gradient(
    135deg,
    rgba(227, 6, 19, 0.95) 0%,
    rgba(196, 5, 15, 0.95) 100%
  );
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);
  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.15);
}

.header-content {
  display: flex;
  align-items: center;
  justify-content: space-between;
  height: 52px;
}

.header-actions {
  display: flex;
  align-items: center;
  flex-shrink: 0;
  gap: 8px;
}

.logo {
  display: flex;
  align-items: center;
  gap: 8px;
  text-decoration: none;
  color: white;
}

.logo-icon {
  font-size: 26px;
}

.logo-text {
  display: flex;
  flex-direction: column;
  line-height: 1.1;
}
.logo-brand {
  font-size: 1.2rem;
  font-weight: 700;
  letter-spacing: 1px;
}
.logo-city {
  font-size: 0.65rem;
  font-weight: 500;
  opacity: 0.85;
}

.refresh-btn {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 36px;
  height: 36px;
  background: rgba(255, 255, 255, 0.15);
  border: none;
  border-radius: 6px;
  color: white;
  cursor: pointer;
  transition: background 0.2s;
}

.refresh-btn:hover {
  background: rgba(255, 255, 255, 0.25);
}
.refresh-btn .material-symbols-rounded {
  font-size: 20px;
}

/* ============================================
   Day Picker - Helios Style
   ============================================ */

.day-picker-wrapper {
  background: var(--bg-white);
  border-bottom: 1px solid var(--border-color);
  padding: 12px 0;
  position: sticky;
  top: 52px;
  z-index: 99;
  overflow: visible;
}

@media (max-width: 768px) {
  .day-picker-wrapper {
    top: 0;
  }
}

.day-picker {
  display: flex;
  gap: 6px;
  overflow-x: auto;
  scrollbar-width: none;
  -ms-overflow-style: none;
  padding: 8px 8px 16px 8px; /* Extra bottom padding for shadow */
  margin: 0 -8px;
}

.day-picker::-webkit-scrollbar {
  display: none;
}

.day-btn {
  flex-shrink: 0;
  display: flex;
  flex-direction: column;
  align-items: center;
  padding: 10px 16px;
  background: var(--bg-card);
  border: 2px solid var(--border-color);
  border-radius: 12px;
  cursor: pointer;
  transition: all 0.25s cubic-bezier(0.4, 0, 0.2, 1);
  min-width: 72px;
  position: relative;
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.04);
}

.day-btn:hover {
  border-color: var(--helios-red);
  transform: translateY(-2px);
  box-shadow: 0 6px 12px rgba(0, 0, 0, 0.08);
}

.day-btn.active {
  background: linear-gradient(135deg, var(--helios-red) 0%, #c62828 100%);
  border-color: transparent;
  color: white;
  box-shadow: 0 4px 12px rgba(211, 47, 47, 0.35),
    0 0 0 3px rgba(211, 47, 47, 0.15);
  transform: translateY(-1px);
}

.day-btn.active:hover {
  box-shadow: 0 6px 16px rgba(211, 47, 47, 0.4),
    0 0 0 3px rgba(211, 47, 47, 0.2);
  transform: translateY(-3px);
}

.day-label {
  font-size: 0.72rem;
  font-weight: 600;
  text-transform: uppercase;
  color: var(--text-muted);
  letter-spacing: 0.5px;
}

.day-date {
  font-size: 0.9rem;
  font-weight: 700;
  color: var(--text-dark);
  margin-top: 3px;
}

.day-btn.active .day-label,
.day-btn.active .day-date {
  color: white;
  text-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);
}

/* ============================================
   Prediction Banner
   ============================================ */

.prediction-banner {
  display: flex;
  align-items: center;
  gap: 12px;
  padding: 12px 16px;
  background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
  border-radius: 12px;
  margin-top: 12px;
  margin-bottom: 12px;
  border-left: 4px solid #00d4ff;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
}

.prediction-banner .ai-insights-btn {
  margin-left: auto;
}

.prediction-banner .material-symbols-rounded {
  font-size: 26px;
  color: #00d4ff;
  filter: drop-shadow(0 0 6px rgba(0, 212, 255, 0.4));
}

.prediction-text {
  display: flex;
  flex-direction: column;
  gap: 2px;
}

.prediction-title {
  font-size: 0.68rem;
  color: rgba(255, 255, 255, 0.65);
  letter-spacing: 0.4px;
  display: flex;
  flex-wrap: wrap;
  align-items: center;
  gap: 8px;
  text-transform: uppercase;
}

/* [Refined Timeline Styles & Fixed Colors] */

/* Force Insight Diff Colors */
.insight-diff.positive {
  color: #16a34a !important; /* Green 600 */
  background: none;
  -webkit-text-fill-color: initial;
  font-weight: 700;
}
.insight-diff.negative {
  color: #dc2626 !important; /* Red 600 */
  background: none;
  -webkit-text-fill-color: initial;
  font-weight: 700;
}

/* Timeline Cards Refinement */
.timeline-report-card,
.timeline-pattern-card {
  background: white;
  border-radius: 16px;
  padding: 20px;
  border: 1px solid #e2e8f0;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.03);
  margin-top: 12px;
  transition: transform 0.2s;
}

.timeline-report-card:hover,
.timeline-pattern-card:hover {
  transform: translateY(-2px);
  box-shadow: 0 8px 24px rgba(0, 0, 0, 0.06);
}

/* Weekly Report Specifics */
.timeline-report-card {
  border-left: 4px solid #3b82f6; /* Blue accent */
  background: linear-gradient(to bottom right, #ffffff, #f8fafc);
}

.timeline-report-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 16px;
  padding-bottom: 12px;
  border-bottom: 1px solid #f1f5f9;
}

.timeline-report-title {
  font-size: 1.1rem;
  font-weight: 700;
  color: #1e293b;
}

.timeline-stats-grid {
  display: grid;
  grid-template-columns: repeat(4, 1fr);
  gap: 12px;
  margin-top: 16px;
}

.report-stat-box {
  background: #f8fafc;
  border-radius: 12px;
  padding: 12px;
  text-align: center;
  border: 1px solid #e2e8f0;
}

.report-stat-value {
  display: block;
  font-size: 1.2rem; /* Bigger numbers */
  font-weight: 800;
  color: #0f172a;
  margin-bottom: 4px;
}

.report-stat-label {
  font-size: 0.7rem;
  color: #64748b;
  text-transform: uppercase;
  letter-spacing: 0.5px;
  font-weight: 600;
}

/* Pattern Card Specifics */
.timeline-pattern-card {
  border-left: 4px solid #8b5cf6; /* Violet accent */
  background: linear-gradient(to bottom right, #ffffff, #faf5ff);
}

.pattern-chip {
  display: inline-flex;
  align-items: center;
  gap: 6px;
  background: #f3e8ff;
  color: #7c3aed;
  padding: 6px 12px;
  border-radius: 20px;
  font-size: 0.75rem;
  font-weight: 700;
  letter-spacing: 0.5px;
  text-transform: uppercase;
  margin-bottom: 12px;
}

.pattern-title {
  font-size: 1.1rem;
  font-weight: 700;
  color: #1e293b;
  margin-bottom: 8px;
}

.pattern-desc {
  font-size: 0.9rem;
  color: #475569;
  line-height: 1.6;
}

/* Mobile adjustments */
@media (max-width: 600px) {
  .timeline-stats-grid {
    grid-template-columns: repeat(2, 1fr);
  }
}

.prediction-value {
  font-size: 1.05rem;
  font-weight: 700;
  color: white;
  letter-spacing: -0.3px;
}

.prediction-value .range {
  color: #00d4ff;
  font-weight: 800;
  font-size: 1.1rem;
  text-shadow: 0 0 12px rgba(0, 212, 255, 0.4);
}

.prediction-value .multiplier {
  font-size: 0.78rem;
  color: #ffd700;
  font-weight: 600;
  margin-left: 2px;
}

/* Factor Badges in Prediction */
.factor-badge {
  display: inline-flex;
  align-items: center;
  gap: 4px;
  font-size: 0.6rem;
  padding: 2px 6px;
  border-radius: 4px;
  font-weight: 600;
}

.factor-badge.holiday {
  background: rgba(255, 215, 0, 0.2);
  color: #ffd700;
}

.factor-badge.school {
  background: rgba(100, 181, 246, 0.2);
  color: #64b5f6;
}

.factor-badge.weather {
  background: rgba(255, 255, 255, 0.15);
  color: white;
}

.factor-badge.sports {
  background: rgba(76, 175, 80, 0.2);
  color: #81c784;
}

.factor-badge.multiplier {
  background: rgba(0, 212, 255, 0.2);
  color: #00d4ff;
}

/* Confidence Indicator */
.confidence {
  font-weight: 700;
  padding: 1px 4px;
  border-radius: 3px;
}

.confidence.high {
  background: rgba(76, 175, 80, 0.3);
  color: #81c784;
}

.confidence.medium {
  background: rgba(255, 193, 7, 0.3);
  color: #ffc107;
}

.confidence.low {
  background: rgba(244, 67, 54, 0.3);
  color: #ef5350;
}

/* Icons in prediction elements */
.prediction-title .material-symbols-rounded {
  font-size: 1rem;
  line-height: 1;
}

.factor-badge .material-symbols-rounded {
  font-size: 0.7rem;
  line-height: 1;
}

.imdb-rating .material-symbols-rounded {
  font-size: 0.85rem;
  color: #f5c518;
  line-height: 1;
}

.popularity-badge .material-symbols-rounded {
  font-size: 0.7rem;
  line-height: 1;
}

/* Filled icon variant */
.material-symbols-rounded.filled {
  font-variation-settings: "FILL" 1, "wght" 400, "GRAD" 0, "opsz" 24;
}

/* Expandable Prediction Header */
.prediction-header {
  display: flex;
  align-items: center;
  gap: 8px;
  cursor: pointer;
  flex-wrap: wrap;
}

.prediction-header:hover {
  opacity: 0.9;
}

.expand-icon {
  margin-left: auto;
  font-size: 1.2rem !important;
  transition: transform 0.3s ease;
}

/* Factor Badge Colors */
.factor-badge.positive {
  background: rgba(76, 175, 80, 0.2);
  color: #81c784;
}

.factor-badge.negative {
  background: rgba(244, 67, 54, 0.2);
  color: #ef5350;
}

.factor-badge.neutral {
  background: rgba(255, 255, 255, 0.15);
  color: rgba(255, 255, 255, 0.7);
}

/* Expandable Prediction Details */
.prediction-details {
  max-height: 0;
  overflow: hidden;
  transition: max-height 0.4s ease, padding 0.3s ease, opacity 0.3s ease,
    margin-top 0.3s ease;
  background: #0d1117;
  border-radius: 12px; /* Rounded all corners */
  margin-top: 4px; /* Slight separation */
  margin-bottom: 16px;
  opacity: 0;
}

.prediction-details.expanded {
  max-height: 600px;
  padding: 20px;
  opacity: 1;
  border: 1px solid rgba(255, 255, 255, 0.08);
}

/* ... (factors grid styles remain same) ... */

/* Factor Info - Below */
.factor-info {
  display: flex;
  flex-direction: column;
  gap: 8px; /* Increased spacing */
}

.factor-name {
  font-size: 0.9rem;
  font-weight: 600;
  color: #e6edf3;
  line-height: 1.4;
}

.factor-desc {
  font-size: 0.75rem; /* Slightly larger */
  color: #7d8590;
  line-height: 1.5; /* Better line height */
}

/* Factors Grid - Compact Layout */
/* =========================================
   FACTOR CARDS REDESIGN (v12 - Compact Professional)
   FACTOR CARDS REDESIGN (v13 - Dark Tech Summary Style)
   ========================================= */

.factors-grid {
  display: grid;
  grid-template-columns: repeat(
    auto-fill,
    minmax(250px, 1fr)
  ); /* Compact but usable */
  gap: 16px;
  margin-top: 20px;
}

.factor-card {
  display: flex;
  flex-direction: column;
  padding: 16px;
  border-radius: 12px;
  background: linear-gradient(
    135deg,
    #1a1a2e 0%,
    #16213e 100%
  ); /* Match Summary BG */
  border: 1px solid rgba(255, 255, 255, 0.08);
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
  min-height: 100%;
  transition: transform 0.2s, box-shadow 0.2s;
  position: relative;
  overflow: hidden;
}

/* Hover State */
.factor-card:hover {
  transform: translateY(-4px);
  box-shadow: 0 12px 24px rgba(0, 0, 0, 0.3);
  border-color: rgba(255, 255, 255, 0.15);
}

/* Accent Line (Left Border substitute or internal glow) */
/* Let's use a subtle left border like the summary might have, or just rely on the icon color */
.factor-card::before {
  content: "";
  position: absolute;
  left: 0;
  top: 0;
  bottom: 0;
  width: 3px;
  background: var(--factor-accent);
}

/* Internal Layout */
.factor-header {
  display: flex;
  justify-content: space-between;
  align-items: flex-start; /* Align top to handle multiline titles if any */
  margin-bottom: 12px;
  gap: 12px;
}

/* Icon Box - like the Blue Sigma box in summary */
.factor-icon-wrapper {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 40px;
  height: 40px;
  background: rgba(255, 255, 255, 0.08); /* Fallback */
  border-radius: 10px;
  flex-shrink: 0;
}

.factor-card .material-symbols-rounded {
  font-size: 22px;
  color: white; /* Icons are white on colored bg */
}

/* Impact Badge - Big and Bold */
.factor-card .factor-impact {
  background: rgba(255, 255, 255, 0.1);
  color: white;
  font-weight: 700;
  font-size: 0.9rem;
  padding: 4px 10px;
  border-radius: 8px;
  white-space: nowrap;
}

/* Content */
.factor-info {
  display: flex;
  flex-direction: column;
  gap: 6px;
}

.factor-name {
  font-family: "Varela Round", sans-serif;
  font-size: 0.95rem;
  font-weight: 600;
  color: #ffffff;
  line-height: 1.4;
}

.factor-desc {
  font-family: "Inter", sans-serif;
  font-size: 0.8rem;
  color: #94a3b8; /* Slate 400 */
  line-height: 1.5;
}

/* VARIANTS - Coloring the Accents */

/* POSITIVE (Green) */
.factor-card.positive {
  --factor-accent: #22c55e;
}
.factor-card.positive .factor-icon-wrapper {
  background: rgba(34, 197, 94, 0.2); /* Green tint */
  border: 1px solid rgba(34, 197, 94, 0.3);
}
.factor-card.positive .material-symbols-rounded {
  color: #4ade80; /* Brighter green icon */
}
.factor-card.positive .factor-impact {
  background: rgba(34, 197, 94, 0.2);
  color: #4ade80;
  border: 1px solid rgba(34, 197, 94, 0.3);
}

/* NEGATIVE (Red) */
.factor-card.negative {
  --factor-accent: #ef4444;
}
.factor-card.negative .factor-icon-wrapper {
  background: rgba(239, 68, 68, 0.2);
  border: 1px solid rgba(239, 68, 68, 0.3);
}
.factor-card.negative .material-symbols-rounded {
  color: #f87171;
}
.factor-card.negative .factor-impact {
  background: rgba(239, 68, 68, 0.2);
  color: #f87171;
  border: 1px solid rgba(239, 68, 68, 0.3);
}

/* NEUTRAL / INFO (Blue/Cyan/Gray) */
.factor-card.neutral {
  --factor-accent: #0ea5e9; /* Sky Blue */
}
.factor-card.neutral .factor-icon-wrapper {
  background: rgba(14, 165, 233, 0.2);
  border: 1px solid rgba(14, 165, 233, 0.3);
}
.factor-card.neutral .material-symbols-rounded {
  color: #38bdf8;
}
.factor-card.neutral .factor-impact {
  background: rgba(255, 255, 255, 0.05);
  color: #94a3b8;
  border: 1px solid rgba(255, 255, 255, 0.1);
}

/* Adjustments for matching summary exactly */
/* Ensure Icon is separate from title */
.factor-card .factor-header {
  align-items: center;
}

/* Icon + Impact Row */
.factor-card .factor-header {
  display: flex;
  justify-content: space-between;
  align-items: flex-start;
  margin-bottom: 12px;
}

.factor-card .material-symbols-rounded {
  font-size: 20px;
  padding: 6px;
  border-radius: 8px; /* Squircle icon bg */
}

.factor-card .factor-impact {
  font-size: 0.75rem;
  font-weight: 700;
  padding: 4px 8px;
  border-radius: 12px;
  letter-spacing: 0.02em;
}

/* Typography */
.factor-info {
  display: flex;
  flex-direction: column;
  gap: 6px;
}

.factor-name {
  font-family: "Varela Round", sans-serif;
  font-size: 0.95rem; /* Balanced size */
  font-weight: 600;
  color: #1e293b;
  line-height: 1.3;
}

.factor-desc {
  font-family: "Inter", sans-serif;
  font-size: 0.8rem;
  color: #64748b;
  line-height: 1.5;
  font-weight: 400;
}

/* Icon + Impact Row */
.factor-card .factor-header {
  display: flex;
  justify-content: space-between;
  align-items: flex-start;
  margin-bottom: 12px;
}

.factor-card .material-symbols-rounded {
  font-size: 1.3rem;
  width: 36px;
  height: 36px;
  display: flex;
  align-items: center;
  justify-content: center;
  border-radius: 10px;
  background: rgba(255, 255, 255, 0.08);
  color: rgba(255, 255, 255, 0.7);
}

.factor-card.positive .material-symbols-rounded {
  background: rgba(46, 160, 67, 0.15);
  color: #3fb950;
}

.factor-card.negative .material-symbols-rounded {
  background: rgba(248, 81, 73, 0.15);
  color: #f85149;
}

.factor-impact {
  font-size: 0.75rem;
  font-weight: 600;
  padding: 4px 10px;
  border-radius: 12px;
  display: flex;
  align-items: center;
  gap: 4px;
}

.factor-card.positive .factor-impact {
  background: rgba(46, 160, 67, 0.15);
  color: #3fb950;
}

.factor-card.positive .factor-impact::before {
  content: "↗";
}

.factor-card.negative .factor-impact {
  background: rgba(248, 81, 73, 0.15);
  color: #f85149;
}

.factor-card.negative .factor-impact::before {
  content: "↘";
}

.factor-card.neutral .factor-impact {
  background: rgba(255, 255, 255, 0.08);
  color: rgba(255, 255, 255, 0.5);
}

/* Factor Info - Below */
.factor-info {
  display: flex;
  flex-direction: column;
  gap: 4px;
}

.factor-name {
  font-size: 0.9rem;
  font-weight: 600;
  color: #e6edf3;
  line-height: 1.3;
}

.factor-desc {
  font-size: 0.7rem;
  color: #7d8590;
  line-height: 1.4;
}

/* Prediction Summary - Clean Bar */
.prediction-summary {
  display: flex;
  align-items: center;
  justify-content: space-between;
  margin-top: 16px;
  padding: 14px 18px;
  background: #161b22;
  border-radius: 12px;
  border: 1px solid rgba(255, 255, 255, 0.06);
}

.prediction-summary .summary-label {
  display: flex;
  align-items: center;
  gap: 10px;
}

.prediction-summary .summary-label .material-symbols-rounded {
  font-size: 1.2rem;
  width: 32px;
  height: 32px;
  display: flex;
  align-items: center;
  justify-content: center;
  border-radius: 8px;
  background: rgba(0, 212, 255, 0.1);
  color: #00d4ff;
}

.prediction-summary .summary-text {
  display: flex;
  flex-direction: column;
}

.prediction-summary .summary-title {
  font-size: 0.65rem;
  text-transform: uppercase;
  letter-spacing: 0.5px;
  color: #7d8590;
}

.prediction-summary .summary-subtitle {
  font-size: 0.8rem;
  font-weight: 500;
  color: #e6edf3;
}

.total-multiplier {
  font-size: 1.4rem;
  font-weight: 700;
  padding: 8px 16px;
  border-radius: 10px;
}

.total-multiplier.positive {
  background: rgba(46, 160, 67, 0.15);
  color: #3fb950;
}

.total-multiplier.negative {
  background: rgba(248, 81, 73, 0.15);
  color: #f85149;
}

.multiplier-label {
  font-size: 0.55rem;
  text-transform: uppercase;
  letter-spacing: 0.3px;
  color: #7d8590;
  text-align: center;
  margin-top: 6px; /* Increased margin */
}

/* ============================================
   Stats Bar
   ============================================ */

.stats-bar {
  display: flex;
  gap: 10px;
  padding: 16px 0;
  flex-wrap: wrap;
}

.stat-item {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 10px 14px;
  background: var(--bg-white);
  border-radius: 8px;
  box-shadow: var(--shadow-sm);
}

.stat-item .material-symbols-rounded {
  font-size: 20px;
  color: var(--helios-red);
}

.stat-content {
  display: flex;
  flex-direction: column;
}

.stat-value {
  font-weight: 700;
  font-size: 1rem;
  color: var(--text-dark);
  line-height: 1.2;
}

.stat-label {
  font-size: 0.7rem;
  color: var(--text-muted);
  text-transform: uppercase;
  letter-spacing: 0.3px;
}

.stat-item.highlight {
  background: var(--helios-red);
}

.stat-item.highlight .material-symbols-rounded,
.stat-item.highlight .stat-value,
.stat-item.highlight .stat-label {
  color: white;
}

.stat-item.muted {
  margin-left: auto;
  background: transparent;
  box-shadow: none;
}

.stat-item.muted .material-symbols-rounded {
  color: var(--text-muted);
}

/* ============================================
   Sections
   ============================================ */

.section {
  margin-bottom: 24px;
}

.section-title {
  display: flex;
  align-items: center;
  gap: 8px;
  font-size: 0.9rem;
  font-weight: 700;
  color: var(--text-dark);
  margin-bottom: 12px;
  text-transform: uppercase;
  letter-spacing: 0.5px;
}

.section-title .material-symbols-rounded {
  font-size: 20px;
  color: var(--helios-red);
}

/* ============================================
   Histogram
   ============================================ */

.histogram-container {
  background: var(--bg-white);
  border-radius: 8px;
  padding: 16px;
  box-shadow: var(--shadow-sm);
}

.histogram {
  display: flex;
  align-items: flex-end;
  justify-content: space-between;
  height: 140px;
  gap: 6px;
  padding-bottom: 8px;
  border-bottom: 1px solid var(--border-color);
}

.histogram-bar-wrap {
  flex: 1;
  height: 100%;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: flex-end;
}

.histogram-bar {
  width: 100%;
  max-width: 40px;
  border-radius: 8px 8px 0 0;
  position: relative;
  min-height: 4px;
  transition: height 0.3s;
  display: flex;
  align-items: flex-start;
  justify-content: center;
}

.histogram-bar.low {
  background: linear-gradient(145deg, #43a047 0%, #2e7d32 100%);
}
.histogram-bar.medium {
  background: linear-gradient(145deg, #ffa726 0%, #f57c00 100%);
}
.histogram-bar.high {
  background: linear-gradient(145deg, #ef5350 0%, #c62828 100%);
}
.histogram-bar.empty {
  background: #e9ecef;
}

.bar-value {
  position: absolute;
  top: 2px;
  left: 50%;
  transform: translateX(-50%);
  font-size: 0.6rem;
  font-weight: 700;
  color: white;
  white-space: nowrap;
  text-shadow: 0 1px 3px rgba(0, 0, 0, 0.5);
  pointer-events: none;
  z-index: 2;
}

.bar-pct {
  font-size: 0.6rem;
  color: var(--text-muted);
  margin-top: 2px;
}

.histogram-labels {
  display: flex;
  padding-top: 6px;
}

.histogram-labels span {
  flex: 1;
  text-align: center;
  font-size: 0.65rem;
  color: var(--text-muted);
  font-weight: 500;
}

/* Histogram Hour Groups */
.hour-group {
  flex: 1;
  display: flex;
  align-items: flex-end;
  height: 100%;
  position: relative;
  transition: flex 0.5s cubic-bezier(0.4, 0, 0.2, 1);
}

.hour-group.expanded {
  flex: 7;
}

/* Main Bar */
.main-bar {
  width: 100%;
  height: 100%;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: flex-end;
  cursor: pointer;
  transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
}

.bar-stack {
  display: flex;
  flex-direction: column;
  align-items: center;
  width: 100%;
  height: 100%;
  justify-content: flex-end;
  position: relative;
}

/* Prediction Background (behind main bar) */
.prediction-bg {
  position: absolute;
  bottom: 0;
  left: 50%;
  transform: translateX(-50%);
  width: 100%;
  max-width: 38px;
  background: linear-gradient(
    180deg,
    rgba(100, 200, 255, 0.12) 0%,
    rgba(100, 200, 255, 0.04) 100%
  );
  border: 1.5px dashed rgba(100, 180, 220, 0.35);
  border-radius: 4px 4px 0 0;
  z-index: 0;
  overflow: visible;
}

.pred-label {
  position: absolute;
  top: -22px;
  left: 50%;
  transform: translateX(-50%);
  font-size: 0.55rem;
  font-weight: 700;
  color: #0088aa;
  white-space: nowrap;
  z-index: 100;
  background: rgba(255, 255, 255, 0.85);
  padding: 1px 4px;
  border-radius: 3px;
  box-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);
}

/* When there's only prediction (no main bar), show prediction as main bar */
.bar-stack:not(:has(.histogram-bar:not(.empty))) .prediction-bg {
  position: relative;
  left: 0;
  transform: none;
}

.histogram-bar {
  position: relative;
  z-index: 1;
}

.histogram-bar.prediction-only {
  background: linear-gradient(
    180deg,
    rgba(0, 180, 220, 0.4) 0%,
    rgba(0, 180, 220, 0.2) 100%
  );
  border-radius: 4px 4px 0 0;
}

.histogram-bar.prediction-only .bar-value {
  color: #00d4ff;
  font-size: 0.6rem;
  font-weight: 700;
  text-shadow: none;
}

.bar-pct.pred {
  color: #006080;
  font-weight: 700;
}

.main-bar:hover .histogram-bar {
  transform: scaleY(1.05);
  filter: brightness(1.1);
}

.main-bar:hover .bar-pct {
  color: var(--helios-red);
}

/* GPU-accelerated expand/collapse animation */
.main-bar {
  will-change: transform, opacity;
  transform-origin: center;
  transition: transform 0.4s ease-out, opacity 0.3s ease-out;
}

.hour-group.expanded .main-bar {
  transform: scaleX(0);
  opacity: 0;
  pointer-events: none;
}

/* Sub-bars Container - GPU accelerated */
.sub-bars {
  display: flex;
  align-items: flex-end;
  gap: 2px;
  height: 100%;
  position: absolute;
  left: 0;
  right: 0;
  will-change: transform, opacity;
  transform: scaleX(0);
  transform-origin: center;
  opacity: 0;
  transition: transform 0.4s ease-out, opacity 0.3s ease-out;
}

.hour-group.expanded .sub-bars {
  transform: scaleX(1);
  opacity: 1;
  background: linear-gradient(
    135deg,
    rgba(227, 6, 19, 0.03) 0%,
    rgba(227, 6, 19, 0.08) 100%
  );
  border-radius: 8px;
  padding: 6px 4px 22px 4px;
}

.sub-bar {
  flex: 1;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: flex-end;
  height: 100%;
  will-change: transform;
  transform: scaleY(0);
  transform-origin: bottom;
  transition: transform 0.35s cubic-bezier(0.34, 1.2, 0.64, 1);
  position: relative;
}

.hour-group.expanded .sub-bar {
  transform: scaleY(1);
}

.hour-group.expanded .sub-bar:nth-child(1) {
  transition-delay: 0.05s;
}
.hour-group.expanded .sub-bar:nth-child(2) {
  transition-delay: 0.08s;
}
.hour-group.expanded .sub-bar:nth-child(3) {
  transition-delay: 0.11s;
}
.hour-group.expanded .sub-bar:nth-child(4) {
  transition-delay: 0.14s;
}
.hour-group.expanded .sub-bar:nth-child(5) {
  transition-delay: 0.17s;
}
.hour-group.expanded .sub-bar:nth-child(6) {
  transition-delay: 0.2s;
}
.hour-group.expanded .sub-bar:nth-child(7) {
  transition-delay: 0.23s;
}

/* Sub-bar Time Labels */
.sub-bar::after {
  content: attr(data-time);
  position: absolute;
  bottom: -16px;
  font-size: 0.55rem;
  color: var(--text-muted);
  opacity: 0;
  transition: opacity 0.3s;
  white-space: nowrap;
}

.hour-group.expanded .sub-bar::after {
  opacity: 1;
}

/* Histogram Bar base */
.histogram-bar {
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  transform-origin: bottom;
}

/* ============================================
   Movie Cards
   ============================================ */

.movies-container {
  display: flex;
  flex-direction: column;
  gap: 12px;
}

/* ============================================
   Movie Cards - Clean Design
   ============================================ */

.movie-card {
  display: flex;
  background: var(--bg-white);
  border-radius: 12px;
  overflow: hidden;
}

.movie-card.special-event {
  border-left: 4px solid var(--helios-red);
}

.movie-card.special-event::before {
  content: "";
  position: absolute;
  left: 0;
  top: 0;
  bottom: 0;
  width: 4px;
  background: linear-gradient(180deg, var(--helios-red) 0%, #ff6b6b 100%);
}

/* Movie Poster */
.movie-poster {
  flex-shrink: 0;
  width: 120px;
  min-height: 160px;
  background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
  overflow: hidden;
  position: relative;
  border-radius: 0 8px 8px 0;
}

.movie-poster::after {
  content: "";
  position: absolute;
  inset: 0;
  background: linear-gradient(180deg, transparent 60%, rgba(0, 0, 0, 0.6) 100%);
  opacity: 0;
  transition: opacity 0.4s ease;
  pointer-events: none;
}

.movie-card:hover .movie-poster::after {
  opacity: 1;
}

.movie-poster img {
  width: 100%;
  height: 100%;
  object-fit: cover;
  object-position: top center;
  display: block;
  transition: transform 0.6s cubic-bezier(0.23, 1, 0.32, 1);
}

.movie-card:hover .movie-poster img {
  transform: scale(1.1);
}

/* Event Badge on Poster */
.event-badge {
  position: absolute;
  bottom: 0;
  left: 0;
  right: 0;
  font-size: 0.6rem;
  font-weight: 700;
  padding: 6px 8px;
  background: linear-gradient(135deg, var(--helios-red) 0%, #c62828 100%);
  color: white;
  text-align: center;
  text-transform: uppercase;
  letter-spacing: 0.8px;
  z-index: 3;
  backdrop-filter: blur(4px);
}

.event-badge.anime {
  background: linear-gradient(135deg, #9c27b0 0%, #7b1fa2 100%);
}

.event-badge.kino-konesera {
  background: linear-gradient(135deg, #1a1a1a 0%, #333 100%);
  color: #d4af37;
}

.event-badge.maraton {
  background: linear-gradient(135deg, #d32f2f 0%, #b71c1c 100%);
}

.event-badge.kultura {
  background: linear-gradient(135deg, #1976d2 0%, #0d47a1 100%);
}

/* Movie Content */
.movie-content,
.movie-card-content {
  flex: 1;
  padding: 14px 16px;
  display: flex;
  flex-direction: column;
  gap: 8px;
  min-width: 0;
}

.movie-header {
  display: flex;
  align-items: flex-start;
  gap: 8px;
  flex-wrap: wrap;
}

/* Movie Title */
.movie-title {
  font-size: 1.05rem;
  font-weight: 700;
  color: var(--text-dark);
  margin: 0;
  line-height: 1.35;
  word-wrap: break-word;
  letter-spacing: -0.02em;
}

.movie-title-row {
  display: flex;
  align-items: center;
  gap: 10px;
  flex-wrap: wrap;
}

/* IMDB Rating */
.imdb-rating {
  display: inline-flex;
  align-items: center;
  gap: 4px;
  font-size: 0.75rem;
  font-weight: 700;
  color: #f5c518;
  background: linear-gradient(
    135deg,
    rgba(245, 197, 24, 0.15) 0%,
    rgba(245, 197, 24, 0.08) 100%
  );
  padding: 4px 8px;
  border-radius: 6px;
  white-space: nowrap;
  transition: transform 0.2s ease;
}

.imdb-rating:hover {
  transform: scale(1.05);
}

.imdb-rating .material-symbols-rounded {
  font-size: 14px;
}

/* Popularity Badge */
.popularity-badge {
  display: inline-flex;
  align-items: center;
  gap: 4px;
  font-size: 0.72rem;
  font-weight: 700;
  padding: 4px 10px;
  border-radius: 20px;
  white-space: nowrap;
  transition: all 0.2s ease;
}

.popularity-badge .material-symbols-rounded {
  font-size: 14px;
}

.popularity-badge:hover {
  transform: scale(1.05);
}

.popularity-badge.hot {
  background: linear-gradient(
    135deg,
    rgba(255, 87, 34, 0.2) 0%,
    rgba(255, 61, 0, 0.15) 100%
  );
  color: #ff5722;
}

.popularity-badge.hot .material-symbols-rounded {
  animation: flame-pulse 1.5s ease-in-out infinite;
}

@keyframes flame-pulse {
  0%,
  100% {
    transform: scale(1);
  }
  50% {
    transform: scale(1.15);
  }
}

.popularity-badge.warm {
  background: linear-gradient(
    135deg,
    rgba(255, 152, 0, 0.2) 0%,
    rgba(255, 167, 38, 0.15) 100%
  );
  color: #ff9800;
}

.popularity-badge.cool {
  background: linear-gradient(
    135deg,
    rgba(76, 175, 80, 0.15) 0%,
    rgba(102, 187, 106, 0.1) 100%
  );
  color: #4caf50;
}

/* Movie Info */
.movie-info {
  font-size: 0.82rem;
  color: var(--text-muted);
  display: flex;
  flex-wrap: wrap;
  gap: 4px 8px;
  align-items: center;
}

.movie-stats-mini {
  display: flex;
  align-items: center;
  gap: 6px;
  font-size: 0.8rem;
  color: var(--text-muted);
  margin-top: 4px;
}

.movie-stats-mini .material-symbols-rounded {
  font-size: 16px;
}

.movie-stats-mini .divider {
  width: 4px;
  height: 4px;
  border-radius: 50%;
  background: currentColor;
  opacity: 0.3;
}

.movie-stats-mini .occ-value {
  font-weight: 700;
}

.movie-stats-mini .occ-value.low {
  color: var(--helios-green);
}
.movie-stats-mini .occ-value.medium {
  color: #f0ad4e;
}
.movie-stats-mini .occ-value.high {
  color: var(--helios-red);
}

/* ============================================
   Screenings Grid - Premium Chips
   ============================================ */

.screenings-grid {
  display: flex;
  flex-wrap: wrap;
  gap: 8px;
  margin-top: 10px;
}

.screening-badge {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  padding: 8px 12px;
  border-radius: 10px;
  text-decoration: none;
  transition: all 0.25s cubic-bezier(0.23, 1, 0.32, 1);
  background: var(--helios-green);
  color: white;
  min-width: 60px;
  position: relative;
  overflow: hidden;
}

.screening-badge::before {
  content: "";
  position: absolute;
  inset: 0;
  background: linear-gradient(
    180deg,
    rgba(255, 255, 255, 0.15) 0%,
    transparent 50%
  );
  pointer-events: none;
}

.screening-badge.low {
  background: linear-gradient(145deg, #43a047 0%, #2e7d32 100%);
}

.screening-badge.medium {
  background: linear-gradient(145deg, #ffa726 0%, #f57c00 100%);
}

.screening-badge.high {
  background: linear-gradient(145deg, #ef5350 0%, #c62828 100%);
}

.screening-badge.high::after {
  content: "";
  position: absolute;
  inset: -2px;
  background: linear-gradient(145deg, #ff6b6b 0%, #d32f2f 100%);
  border-radius: 12px;
  z-index: -1;
  animation: pulse-glow 2s ease-in-out infinite;
}

@keyframes pulse-glow {
  0%,
  100% {
    opacity: 0;
    transform: scale(1);
  }
  50% {
    opacity: 0.5;
    transform: scale(1.05);
  }
}

.screening-badge:hover {
  transform: translateY(-3px) scale(1.05);
  box-shadow: 0 8px 20px rgba(0, 0, 0, 0.25);
}

.screening-badge:active {
  transform: translateY(-1px) scale(1.02);
}

.screening-time {
  font-weight: 800;
  font-size: 1rem;
  letter-spacing: -0.02em;
  text-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);
}

.screening-seats {
  font-size: 0.68rem;
  font-weight: 600;
  opacity: 0.9;
  margin-top: 2px;
}

/* Prediction Indicator in Screening */
.pred-indicator {
  font-size: 0.6rem;
  font-weight: 700;
  color: white;
  background: rgba(0, 0, 0, 0.2);
  padding: 2px 8px;
  border-radius: 12px;
  margin-top: 4px;
  display: inline-flex;
  align-items: center;
  gap: 3px;
}

.pred-indicator::before {
  content: "trending_up";
  font-family: "Material Symbols Rounded";
  font-size: 0.7rem;
}

.screening-pred {
  font-size: 0.6rem;
  font-weight: 700;
  color: #00d4ff;
  background: rgba(0, 212, 255, 0.15);
  padding: 2px 6px;
  border-radius: 4px;
  margin-top: 3px;
}

/* ============================================
   States
   ============================================ */

.loading,
.empty-state {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  padding: 48px 20px;
  background: var(--bg-white);
  border-radius: 8px;
  text-align: center;
  color: var(--text-muted);
}

.spinner {
  width: 36px;
  height: 36px;
  border: 3px solid #e9ecef;
  border-top-color: var(--helios-red);
  border-radius: 50%;
  animation: spin 1s linear infinite;
  margin-bottom: 12px;
}

/* Archive Banner */
.archive-banner {
  background: linear-gradient(135deg, var(--helios-red), #a50e0e);
  color: white;
  padding: 12px 20px;
  border-radius: 8px;
  margin-bottom: 24px;
  display: flex;
  justify-content: space-between;
  align-items: center;
  box-shadow: 0 4px 15px rgba(229, 9, 20, 0.3);
  animation: slideDown 0.3s ease-out;
}

@keyframes slideDown {
  from {
    opacity: 0;
    transform: translateY(-10px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.archive-info {
  display: flex;
  align-items: center;
  gap: 10px;
  font-size: 1.1rem;
}

.exit-archive-btn {
  background: white;
  color: var(--helios-red);
  border: none;
  padding: 8px 16px;
  border-radius: 20px;
  font-weight: 700;
  cursor: pointer;
  display: flex;
  align-items: center;
  gap: 6px;
  transition: transform 0.2s, box-shadow 0.2s;
  font-family: inherit;
}

.exit-archive-btn:hover {
  transform: translateY(-2px);
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
}

.exit-archive-btn .material-symbols-rounded {
  font-size: 1.2rem;
}

/* History Modal - Theme Update */
/* History Modal - Light Theme Redesign */
.history-modal {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: rgba(0, 0, 0, 0.6); /* Lighter backdrop */
  display: flex;
  justify-content: center;
  align-items: center;
  z-index: 2000;
  backdrop-filter: blur(3px);
  padding: 16px;
}

.history-modal-content {
  background: var(--bg-white);
  width: 100%;
  max-width: 420px;
  border-radius: 12px;
  overflow: hidden;
  box-shadow: 0 10px 40px rgba(0, 0, 0, 0.2);
  display: flex;
  flex-direction: column;
  max-height: 80vh;
  border: none;
}

.history-header {
  background: var(--bg-white);
  border-bottom: 1px solid var(--border-color);
  padding: 16px 20px;
  display: flex;
  justify-content: space-between;
  align-items: center;
}

.history-header h3 {
  color: var(--text-dark);
  margin: 0;
  font-size: 1.1rem;
  font-weight: 700;
  display: flex;
  align-items: center;
  gap: 8px;
}

.history-header h3::before {
  content: "history";
  font-family: "Material Symbols Rounded";
  font-weight: normal;
  color: var(--helios-red);
  font-size: 1.4rem;
}

.close-btn {
  background: #f1f3f5;
  border: none;
  color: var(--text-muted);
  cursor: pointer;
  width: 32px;
  height: 32px;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: all 0.2s;
}

.close-btn:hover {
  background: #e9ecef;
  color: var(--helios-red);
  transform: rotate(90deg);
}

.close-btn .material-symbols-rounded {
  font-size: 1.2rem;
}

.history-list {
  padding: 16px;
  overflow-y: auto;
  display: flex;
  flex-direction: column;
  gap: 8px;
  background: #f8f9fa;
}

.history-item {
  display: flex;
  align-items: center;
  gap: 12px;
  background: white;
  border: 1px solid var(--border-color);
  padding: 12px 16px;
  border-radius: 8px;
  color: var(--text-body);
  cursor: pointer;
  transition: all 0.2s;
  font-size: 0.95rem;
  width: 100%;
  text-align: left;
  font-weight: 500;
  box-shadow: 0 1px 2px rgba(0, 0, 0, 0.05);
}

.history-item:hover {
  border-color: var(--helios-red);
  transform: translateY(-1px);
  box-shadow: 0 4px 12px rgba(227, 6, 19, 0.1);
  color: var(--helios-red);
}

.history-item .material-symbols-rounded {
  color: var(--helios-red);
  font-size: 1.2rem;
  background: rgba(227, 6, 19, 0.1);
  padding: 6px;
  border-radius: 6px;
}

/* History Tab Button */
.history-tab {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  background: white;
  border: 1px solid var(--border-color);
  border-radius: 8px;
  color: var(--text-muted);
  cursor: pointer;
  padding: 0 16px;
  height: 100%;
  transition: all 0.2s;
  min-height: 42px; /* Match day picker buttons */
}

.history-tab:hover {
  border-color: var(--helios-red);
  color: var(--helios-red);
  background: #fff5f5;
}

/* Mobile Responsiveness Improvements */
@media (max-width: 768px) {
  /* Header adjustments */
  header {
    padding: 12px 16px;
    flex-direction: row; /* Force inline layout */
    flex-wrap: nowrap; /* Prevent wrapping */
    justify-content: space-between;
    align-items: center;
  }

  .header-actions {
    gap: 12px;
  }

  #refreshButton span {
    /* Hide text on mobile, keep icon */
    display: none;
  }

  #refreshButton {
    padding: 8px; /* Circle button */
    border-radius: 50%;
  }

  #refreshButton::before {
    content: "refresh";
    font-family: "Material Symbols Rounded";
    font-size: 1.2rem;
    display: block;
  }

  /* Compact Archive Banner */
  .archive-banner {
    flex-direction: column;
    gap: 12px;
    align-items: stretch;
    text-align: center;
  }

  .archive-info {
    justify-content: center;
  }

  .exit-archive-btn {
    justify-content: center;
  }

  /* Zapowiedzi Compact Mode */
  .coming-soon-grid {
    grid-template-columns: 1fr 1fr; /* 2 columns instead of 1 big column */
    gap: 12px;
  }

  .coming-soon-card {
    border-radius: 8px;
  }

  .coming-soon-poster {
    max-height: 200px;
  }

  .coming-soon-info {
    padding: 12px;
  }

  .coming-soon-info h3 {
    font-size: 1rem;
    margin-bottom: 4px;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
  }

  .coming-soon-meta {
    gap: 4px;
    font-size: 0.75rem;
  }

  .coming-soon-description {
    display: none; /* Hide description on mobile to save space */
  }

  .days-until {
    padding: 2px 6px;
    font-size: 0.7rem;
    top: 8px;
    right: 8px;
  }
}

@media (max-width: 480px) {
  /* These styles are overridden by later 640px media query */
}

.empty-state .material-symbols-rounded {
  font-size: 48px;
  margin-bottom: 12px;
  color: #ced4da;
}

.empty-state h3 {
  font-size: 1.1rem;
  margin-bottom: 4px;
  color: var(--text-dark);
}

/* ============================================
   Footer
   ============================================ */

.footer {
  margin-top: auto;
  padding: 16px 0;
  background: var(--bg-dark);
  color: var(--text-light);
  font-size: 0.8rem;
}

.footer-content {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 6px;
}

.footer-content .material-symbols-rounded {
  font-size: 16px;
}

/* ============================================
   Responsive
   ============================================ */

@media (max-width: 768px) {
  .stats-bar {
    gap: 8px;
  }

  .stat-item.muted {
    width: 100%;
    margin-left: 0;
    justify-content: center;
  }

  .movie-poster {
    width: 80px;
    height: 110px;
  }
  .movie-title {
    font-size: 0.95rem;
  }

  .histogram {
    height: 100px;
  }

  /* Force expanded hour to be wide enough to show all minute bars clearly */
  .hour-group.expanded {
    min-width: 280px;
    flex-shrink: 0;
  }

  /* Mobile histogram - smaller prediction labels */
  .pred-label {
    font-size: 0.45rem;
    top: -14px;
    padding: 0;
    background: none;
    box-shadow: none;
  }

  .bar-value {
    font-size: 0.55rem;
  }

  .bar-pct {
    font-size: 0.5rem;
  }
}

@media (max-width: 480px) {
  .stat-item {
    flex: 1;
    min-width: calc(50% - 4px);
    padding: 8px 10px;
  }

  .movie-card {
    flex-direction: column;
  }
  .movie-poster {
    width: 100%;
    height: 160px;
  }
  .screenings-grid {
    justify-content: center;
  }
}

/* Hall Status Grid */
.hall-grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(220px, 1fr));
  gap: 15px;
  margin-top: 15px;
}

.hall-card {
  background: white;
  border-radius: 12px;
  padding: 15px;
  box-shadow: 0 2px 6px rgba(0, 0, 0, 0.06);
  transition: box-shadow 0.2s ease;
  display: flex;
  flex-direction: column;
  justify-content: space-between;
  border: 1px solid #e5e7eb;
  position: relative;
  overflow: hidden;
}

.hall-card:hover {
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
}

.hall-card.playing {
  border-color: #00d4ff;
  box-shadow: 0 2px 8px rgba(0, 212, 255, 0.12);
}

.hall-card.playing:hover {
  box-shadow: 0 6px 16px rgba(0, 212, 255, 0.18);
}

.hall-card.idle {
  opacity: 0.8;
}

.insight-date {
  display: flex !important;
  justify-content: space-between;
  align-items: center;
  padding: 0 12px;
  margin-bottom: 2px;
  font-size: 0.8rem;
  font-weight: 500;
  color: #94a3b8; /* Slate 400 */
}

.hall-header {
  display: flex;
  justify-content: space-between;
  align-items: flex-start;
  gap: 8px;
  margin-bottom: 10px;
}

.hall-name {
  font-weight: 700;
  color: #1f2937;
  font-size: 0.92rem;
  flex: 1;
  min-width: 0;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.hall-badge {
  background: linear-gradient(135deg, #f1f5f9 0%, #e2e8f0 100%);
  padding: 4px 10px;
  border-radius: 6px;
  font-size: 0.72rem;
  font-weight: 700;
  color: #64748b;
  white-space: nowrap;
  flex-shrink: 0;
}

.hall-badge.occupied {
  background: linear-gradient(
    135deg,
    rgba(0, 212, 255, 0.15) 0%,
    rgba(0, 180, 220, 0.2) 100%
  );
  color: #0891b2;
}

.hall-movie {
  margin-bottom: 10px;
}

.hall-status-label {
  font-size: 0.68rem;
  text-transform: uppercase;
  font-weight: 700;
  color: #00d4ff;
  display: block;
  margin-bottom: 4px;
  letter-spacing: 0.3px;
}

.hall-status-label.future {
  color: #94a3b8;
}

.hall-movie-title {
  font-size: 0.88rem;
  margin: 0 0 4px 0;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  color: #1e293b;
  max-width: 100%;
  font-weight: 500;
}

.hall-movie-title.muted {
  color: #94a3b8;
}

.hall-meta {
  font-size: 0.72rem;
  color: #64748b;
  display: flex;
  flex-wrap: wrap;
  gap: 4px;
}

.progress-container {
  height: 6px;
  background: linear-gradient(90deg, #f1f5f9 0%, #e2e8f0 100%);
  border-radius: 3px;
  overflow: hidden;
  margin-top: auto;
}

.progress-bar {
  height: 100%;
  background: linear-gradient(90deg, #00d4ff 0%, #00a3cc 100%);
  border-radius: 3px;
  transition: width 0.6s cubic-bezier(0.4, 0, 0.2, 1);
  position: relative;
}

.progress-bar::after {
  content: "";
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: linear-gradient(
    90deg,
    transparent 0%,
    rgba(255, 255, 255, 0.3) 50%,
    transparent 100%
  );
  animation: progressShine 2s ease-in-out infinite;
}

@keyframes progressShine {
  0%,
  100% {
    transform: translateX(-100%);
  }
  50% {
    transform: translateX(100%);
  }
}

.hall-empty {
  color: #999;
  font-size: 0.8rem;
  display: flex;
  align-items: center;
  gap: 6px;
  margin-top: 10px;
}

.section-title span {
  vertical-align: middle;
  margin-right: 8px;
  color: var(--helios-blue);
}

/* ============================================
   Mobile Responsiveness
   ============================================ */

@media (max-width: 768px) {
  html {
    font-size: 13px; /* Slightly smaller base font */
  }

  .container {
    padding: 0 12px;
  }

  /* Compact Day Picker */
  .day-picker {
    gap: 4px;
  }

  .day-btn {
    min-width: 60px;
    padding: 6px 8px;
  }

  .day-date {
    font-size: 0.8rem;
  }

  /* Prediction Banner - COMPACT on mobile */
  .prediction-banner {
    flex-wrap: nowrap;
    padding: 6px 10px;
    gap: 8px;
    margin: 8px 0;
    border-radius: 6px;
    border-left-width: 2px;
  }

  .prediction-banner .material-symbols-rounded:first-child {
    font-size: 18px;
  }

  .prediction-text {
    flex: 1;
    display: flex;
    flex-direction: column;
    gap: 2px;
  }

  .prediction-title {
    font-size: 0.55rem !important;
  }

  .prediction-value {
    font-size: 0.8rem !important;
  }

  .ai-insights-btn {
    padding: 4px 8px;
    font-size: 0.7rem;
  }

  .ai-insights-btn span:not(.material-symbols-rounded) {
    display: none;
  }

  .ai-insights-btn .material-symbols-rounded {
    font-size: 16px;
  }

  /* Coming Soon - EXACT iOS MATCH */
  .coming-soon-grid {
    display: grid !important;
    grid-template-columns: repeat(3, 1fr) !important;
    gap: 16px 10px !important;
  }

  .coming-soon-card {
    display: block;
    background: var(--bg-white);
    box-shadow: none;
    border-radius: 0;
  }

  .coming-soon-poster {
    width: 100%;
    aspect-ratio: 2/3 !important;
    height: auto !important;
    position: relative;
    border-radius: 12px;
    overflow: hidden;
  }

  .coming-soon-poster img {
    width: 100%;
    height: 100%;
    object-fit: cover;
    position: absolute;
    top: 0;
    left: 0;
  }

  /* Tag "Za X dni" - TOP RIGHT corner */
  .days-until {
    position: absolute;
    top: 6px;
    right: 6px;
    left: auto;
    background: rgba(0, 0, 0, 0.7);
    color: white;
    font-size: 0.55rem;
    font-weight: 600;
    padding: 4px 8px;
    border-radius: 6px;
    text-transform: capitalize;
  }

  /* Hide premiere badge on poster */
  .premiere-badge {
    display: none !important;
  }

  /* Info section - left aligned */
  .coming-soon-info {
    padding: 8px 0 0 0;
    background: var(--bg-white);
    text-align: left;
  }

  .coming-soon-info h3,
  .coming-soon-title {
    font-size: 0.75rem !important;
    font-weight: 600;
    line-height: 1.3;
    margin: 0 0 2px 0;
    color: var(--text-dark);
    display: -webkit-box;
    -webkit-line-clamp: 2;
    line-clamp: 2;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }

  /* Show date below title */
  .coming-soon-meta {
    display: block !important;
    font-size: 0.65rem;
    color: var(--text-muted);
  }

  .coming-soon-meta > span:not(:first-child) {
    display: none;
  }

  .coming-soon-meta .material-symbols-rounded {
    display: none;
  }

  /* Premiere date - styled for mobile */
  .premiere-date {
    font-size: 0.65rem;
    color: var(--text-muted);
    margin: 2px 0 0 0;
  }

  /* Hide all extras */
  .coming-soon-meta,
  .coming-soon-description,
  .coming-soon-director,
  .original-title,
  .on-sale-badge {
    display: none !important;
  }

  /* Stats Bar: 2 columns */
  .stats-bar {
    gap: 8px;
  }

  .stat-item {
    flex: 1 1 calc(50% - 10px);
    padding: 8px 10px;
  }

  .stat-item.muted {
    margin-left: 0;
    flex: 1 1 100%;
    order: 10;
  }

  /* Factor Cards Full Width */
  .factor-card {
    min-width: 100%;
    flex: 1 1 100%;
  }
}

@media (max-width: 480px) {
  /* Header Adjustments */
  .header-content {
    flex-direction: row;
    align-items: center;
    justify-content: space-between;
    gap: 12px;
  }

  .header-controls {
    width: 100%;
    justify-content: space-between;
  }

  /* Movie Card Layout - Stacked */
  .movie-card {
    flex-direction: column;
    position: relative;
    border-radius: 12px;
    overflow: hidden;
  }

  .movie-poster {
    width: 100%;
    height: 200px;
    min-height: auto;
    position: relative;
  }

  .movie-poster img {
    object-position: top center;
  }

  /* Fade element for poster? Optional */
  .movie-poster::after {
    content: "";
    position: absolute;
    bottom: 0;
    left: 0;
    right: 0;
    height: 60px;
    background: linear-gradient(to bottom, transparent, rgba(0, 0, 0, 0.1));
    pointer-events: none;
  }

  .movie-card-content {
    padding: 16px;
  }

  .movie-title {
    font-size: 1.1rem;
    margin-bottom: 4px;
  }

  .movie-info {
    font-size: 0.85rem;
    color: var(--text-muted);
    margin-bottom: 12px;
  }

  /* Screenings Grid - Tiles */
  .screenings-grid {
    display: grid;
    grid-template-columns: repeat(4, 1fr);
    gap: 8px;
    margin-top: 12px;
  }

  .screening-badge {
    /* Reset current styles */
    border: none;
    background: #f0f0f0;
    color: #333;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    padding: 8px 4px;
    border-radius: 8px;
    height: auto;
    aspect-ratio: 1.25;
    text-decoration: none;
    box-shadow: 0 1px 2px rgba(0, 0, 0, 0.05);
  }

  .screening-badge .screening-time {
    font-size: 1.1rem;
    font-weight: 800;
  }

  .screening-badge .screening-seats {
    font-size: 0.75rem;
    font-weight: 500;
    margin-top: 2px;
    opacity: 0.9;
  }

  /* Color variants for mobile tiles */
  .screening-badge.low {
    background-color: #00a651;
    color: white !important;
  }

  .screening-badge.medium {
    background-color: #ffc107;
    color: #333 !important;
  }

  .screening-badge.high {
    background-color: #e30613;
    color: white !important;
  }

  /* Hide Pred indicator text inside tile if too small, or style it */
  .pred-indicator {
    font-size: 0.6rem;
    background: rgba(255, 255, 255, 0.2);
    padding: 1px 4px;
    border-radius: 4px;
    margin-top: 2px;
    color: inherit;
  }

  /* Status Halls */
  .hall-grid {
    grid-template-columns: 1fr;
  }

  /* Halls Stacked inside card if needed, but horizontal scroll usually better */
  .halls-container {
    padding-bottom: 4px; /* Ensure scrollbar space */
  }

  .hall-card {
    min-width: 140px; /* Ensure cards don't shrink too much */
  }

  /* Prediction Details */
  .prediction-details.expanded {
    padding: 12px;
  }
}

/* ============================================
   Collapsible Sections
   ============================================ */

.section-title {
  cursor: pointer;
  user-select: none;
  display: flex !important;
  align-items: center;
  /* Ensure click area covers full width if possible, or at least feels interactive */
}

/* Add toggle icon via CSS or enable class to rotate it */
.section-toggle-icon {
  margin-left: auto;
  transition: transform 0.3s ease;
  color: var(--text-muted);
}

.section.collapsed .section-toggle-icon {
  transform: rotate(-180deg);
}

.hall-grid {
  transition: max-height 0.4s ease-out, opacity 0.3s ease-out, margin-top 0.3s;
  max-height: 2000px; /* Large enough for content */
  opacity: 1;
  overflow: hidden;
  transform-origin: top;
}

.section.collapsed .hall-grid {
  max-height: 0;
  opacity: 0;
  margin-top: 0;
}

/* ============================================
   COMING SOON / ZAPOWIEDZI
   ============================================ */

/* Tab button in day picker */
.coming-soon-tab {
  display: flex;
  align-items: center;
  gap: 6px;
  padding: 10px 18px;
  background: transparent;
  border: 2px solid var(--helios-red);
  border-radius: 24px;
  color: var(--helios-red);
  font-family: var(--font);
  font-size: 0.875rem;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  white-space: nowrap;
  margin-left: 12px;
  flex-shrink: 0;
  position: relative;
  overflow: hidden;
}

/* Day picker container flex layout */
.day-picker-container {
  display: flex;
  align-items: center;
  gap: 8px;
}

.coming-soon-tab:hover {
  background: rgba(227, 6, 19, 0.08);
  transform: translateY(-1px);
  box-shadow: 0 4px 12px rgba(227, 6, 19, 0.15);
}

.coming-soon-tab.active {
  background: linear-gradient(135deg, var(--helios-red) 0%, #c62828 100%);
  color: white;
  border-color: transparent;
  box-shadow: 0 4px 16px rgba(211, 47, 47, 0.35);
}

.coming-soon-tab .material-symbols-rounded {
  font-size: 1.1rem;
}

/* Back to schedule button */
.back-to-schedule {
  display: inline-flex;
  align-items: center;
  gap: 4px;
  margin-left: auto;
  padding: 6px 12px;
  background: var(--bg-page);
  border: 1px solid var(--border-color);
  border-radius: 6px;
  color: var(--text-muted);
  font-family: var(--font);
  font-size: 0.8rem;
  cursor: pointer;
  transition: all 0.2s ease;
}

.back-to-schedule:hover {
  background: var(--bg-white);
  color: var(--helios-red);
  border-color: var(--helios-red);
}

.back-to-schedule .material-symbols-rounded {
  font-size: 1rem;
}

/* Coming soon container - stacked sections */
.coming-soon-container {
  display: flex;
  flex-direction: column;
  gap: 32px;
}

/* Coming soon card */
.coming-soon-card {
  background: var(--bg-white);
  border-radius: 12px;
  overflow: hidden;
  box-shadow: var(--shadow-md);
  transition: transform 0.2s ease, box-shadow 0.2s ease;
}

.coming-soon-card:hover {
  transform: translateY(-4px);
  box-shadow: 0 8px 24px rgba(0, 0, 0, 0.15);
}

/* Poster area */
.coming-soon-poster {
  position: relative;
  aspect-ratio: 2/3;
  overflow: hidden;
}

.coming-soon-poster img {
  width: 100%;
  height: 100%;
  object-fit: cover;
  transition: transform 0.3s ease;
}

.coming-soon-card:hover .coming-soon-poster img {
  transform: scale(1.05);
}

/* Premiere badge - HIDDEN (use premiere-date in info instead) */
.premiere-badge {
  display: none;
}

.premiere-badge .material-symbols-rounded {
  font-size: 1.1rem;
}

/* Days until badge */
.days-until {
  position: absolute;
  top: 8px;
  right: 8px;
  padding: 4px 10px;
  background: rgba(0, 0, 0, 0.75);
  backdrop-filter: blur(4px);
  color: white;
  font-size: 0.7rem;
  font-weight: 700;
  border-radius: 16px;
  text-transform: uppercase;
  letter-spacing: 0.5px;
}

/* On sale badge - like Helios (top left, green) */
.on-sale-badge {
  position: absolute;
  top: 8px;
  left: 8px;
  padding: 5px 10px;
  background: linear-gradient(135deg, #1a8a1a, #0f6b0f);
  color: white;
  font-size: 0.6rem;
  font-weight: 700;
  border-radius: 3px;
  text-transform: uppercase;
  letter-spacing: 0.5px;
  box-shadow: 0 2px 6px rgba(0, 0, 0, 0.4);
  z-index: 10;
}

/* Marathon time */
.marathon-time {
  display: flex;
  align-items: center;
  gap: 6px;
  color: var(--text-dark);
  font-weight: 600;
  font-size: 0.9rem;
  margin-top: 4px;
}

.marathon-time .material-symbols-rounded {
  font-size: 1rem;
  color: var(--helios-red);
}

/* Info section - clean iOS-style */
.coming-soon-info {
  padding: 10px 4px;
}

.coming-soon-title {
  font-size: 0.9rem;
  font-weight: 600;
  color: var(--text-dark);
  margin-bottom: 2px;
  line-height: 1.3;
  display: -webkit-box;
  -webkit-line-clamp: 2;
  line-clamp: 2;
  -webkit-box-orient: vertical;
  overflow: hidden;
}

.premiere-date {
  font-size: 0.75rem;
  color: var(--text-muted);
  margin: 0;
}

.original-title,
.coming-soon-meta,
.coming-soon-description,
.coming-soon-director {
  display: none;
}

.coming-soon-meta > span {
  display: inline-flex;
  align-items: center;
  gap: 4px;
  font-size: 0.75rem;
  color: var(--text-muted);
  background: var(--bg-page);
  padding: 4px 8px;
  border-radius: 4px;
}

.coming-soon-meta .material-symbols-rounded {
  font-size: 0.9rem;
}

.coming-soon-meta .age-rating {
  background: var(--helios-navy);
  color: white;
  font-weight: 700;
}

.coming-soon-meta .kids-badge {
  background: #4caf50;
  color: white;
}

.coming-soon-description {
  font-size: 0.85rem;
  color: var(--text-body);
  line-height: 1.5;
  margin-bottom: 8px;
}

.coming-soon-director {
  font-size: 0.8rem;
  color: var(--text-muted);
}

.coming-soon-director strong {
  color: var(--text-body);
}

/* Section title with back button */
.coming-soon-section .section-title {
  display: flex;
  align-items: center;
  flex-wrap: wrap;
  gap: 12px;
}

/* Mobile adjustments */
@media (max-width: 640px) {
  .coming-soon-container {
    grid-template-columns: 1fr;
  }

  .coming-soon-tab {
    padding: 6px 12px;
    font-size: 0.8rem;
  }

  .back-to-schedule span:not(.material-symbols-rounded) {
    display: none;
  }

  .day-picker-wrapper .container {
    flex-wrap: nowrap;
  }
}

/* Section subtitles */
.coming-soon-subtitle {
  display: flex;
  align-items: center;
  gap: 8px;
  font-size: 1.1rem;
  font-weight: 600;
  color: var(--text-dark);
  margin: 0 0 16px 0;
  padding-bottom: 8px;
  border-bottom: 2px solid var(--border-color);
}

.coming-soon-subtitle .material-symbols-rounded {
  color: var(--helios-red);
}

.marathons-subtitle {
  margin-top: 0;
}

/* Grid for movie cards - HORIZONTAL row */
.coming-soon-grid {
  display: grid;
  grid-template-columns: repeat(5, 1fr);
  gap: 16px;
  align-items: start;
}

@media (max-width: 1200px) {
  .coming-soon-grid {
    grid-template-columns: repeat(4, 1fr);
  }
}

@media (max-width: 900px) {
  .coming-soon-grid {
    grid-template-columns: repeat(3, 1fr);
  }
}

@media (max-width: 600px) {
  .coming-soon-grid {
    grid-template-columns: repeat(2, 1fr);
  }
}

/* Section wrapper */
.coming-soon-section-wrapper {
  display: flex;
  flex-direction: column;
}

/* Marathon card - vertical layout like movie cards */
.marathon-card {
  display: flex;
  flex-direction: column;
  background: var(--bg-white);
  border-radius: 12px;
  overflow: hidden;
  box-shadow: var(--shadow-md);
  transition: transform 0.2s ease, box-shadow 0.2s ease;
}

.marathon-card:hover {
  transform: translateY(-4px);
  box-shadow: 0 8px 24px rgba(0, 0, 0, 0.15);
}

.marathon-card .coming-soon-poster {
  aspect-ratio: 2/3;
  width: 100%;
}

.marathon-card .coming-soon-info {
  padding: 12px;
}

.marathon-card .coming-soon-title {
  font-size: 0.95rem;
  font-weight: 700;
  color: var(--text-dark);
  margin-bottom: 4px;
}

.marathon-date {
  display: flex;
  align-items: center;
  gap: 4px;
  color: var(--helios-red);
  font-weight: 600;
  font-size: 0.75rem;
  margin-top: 4px;
}

.marathon-date .material-symbols-rounded {
  font-size: 0.9rem;
}

.marathon-time {
  display: flex;
  align-items: center;
  gap: 4px;
  color: var(--text-dark);
  font-weight: 600;
  font-size: 0.75rem;
  margin-top: 2px;
}

.marathon-time .material-symbols-rounded {
  font-size: 0.9rem;
  color: var(--helios-red);
}

.marathon-description {
  display: none; /* Hide description for compact vertical cards */
}

.no-marathons {
  color: var(--text-light);
  font-style: italic;
  padding: 16px;
  text-align: center;
}
/* Archive Poster Placeholder */
.archive-poster {
  width: 100%;
  height: 100%;
  background: linear-gradient(135deg, #2a2a3e, #1a1a2e);
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  padding: 16px;
  text-align: center;
  color: #a0a0b0;
}

.archive-poster .material-symbols-rounded {
  font-size: 48px;
  opacity: 0.5;
  margin-bottom: 12px;
}

.archive-poster-title {
  font-size: 0.9rem;
  font-weight: 600;
  color: #e0e0e0;
  display: -webkit-box;
  -webkit-line-clamp: 4;
  line-clamp: 4;
  -webkit-box-orient: vertical;
  overflow: hidden;
}

/* Ensure placeholder fills container */
.movie-poster .archive-poster {
  position: absolute;
  top: 0;
  left: 0;
  border-radius: 8px; /* Match local image radius if any */
}
/* Marathons list - grid like movies */
.marathons-list {
  display: grid;
  grid-template-columns: repeat(5, 1fr);
  gap: 16px;
  align-items: start;
}

@media (max-width: 1200px) {
  .marathons-list {
    grid-template-columns: repeat(4, 1fr);
  }
}

@media (max-width: 900px) {
  .marathons-list {
    grid-template-columns: repeat(3, 1fr);
  }
}

@media (max-width: 600px) {
  .marathons-list {
    grid-template-columns: repeat(2, 1fr);
  }
}

.marathon-badge {
  position: absolute;
  top: 8px;
  left: 8px;
  width: 32px;
  height: 32px;
  display: flex;
  align-items: center;
  justify-content: center;
  background: var(--helios-red);
  color: white;
  border-radius: 50%;
  font-size: 1rem;
}

.marathon-badge .material-symbols-rounded {
  font-size: 1.1rem;
}

/* =============================================
   TIMELINE VIEW
   ============================================= */
.timeline-tab,
.ai-insights-tab {
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 8px 12px;
  background: var(--bg-white);
  border: 1px solid var(--border-color);
  border-radius: 8px;
  color: var(--helios-red);
  cursor: pointer;
  transition: all 0.2s;
}

.timeline-tab:hover,
.ai-insights-tab:hover {
  background: rgba(227, 6, 19, 0.1);
  border-color: var(--helios-red);
}

/* AI Insights button in prediction banner */
.ai-insights-btn {
  display: flex;
  align-items: center;
  gap: 6px;
  gap: 6px;
  /* margin-left: auto; Removed to allow grouping */
  padding: 6px 12px;
  padding: 6px 12px;
  background: rgba(255, 255, 255, 0.15);
  border: 1px solid rgba(255, 255, 255, 0.3);
  border-radius: 20px;
  color: white;
  font-size: 0.85rem;
  font-weight: 500;
  cursor: pointer;
  transition: all 0.2s;
}

.ai-insights-btn:hover {
  background: rgba(255, 255, 255, 0.25);
  border-color: rgba(255, 255, 255, 0.5);
}

.ai-insights-btn .material-symbols-rounded {
  font-size: 18px;
}

/* Timeline toggle button in Repertoire */
.timeline-toggle-btn {
  display: inline-flex;
  align-items: center;
  gap: 6px;
  margin-left: auto;
  padding: 6px 12px;
  background: var(--bg-white);
  border: 1px solid var(--helios-red);
  border-radius: 20px;
  color: var(--helios-red);
  font-size: 0.8rem;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.2s;
}

.timeline-toggle-btn:hover {
  background: var(--helios-red);
  color: white;
}

.timeline-toggle-btn .material-symbols-rounded {
  font-size: 16px;
}

.timeline-section,
.ai-insights-section {
  padding: 20px 0;
}

.timeline-container {
  margin-top: 16px;
}

.timeline {
  position: relative;
  padding-left: 20px;
}

.timeline::before {
  content: "";
  position: absolute;
  left: 8px;
  top: 0;
  bottom: 0;
  width: 2px;
  background: var(--helios-red);
  opacity: 0.3;
}

.timeline-hour-group {
  margin-bottom: 24px;
  position: relative;
}

.timeline-hour-marker {
  position: sticky;
  top: 60px;
  background: var(--helios-red);
  color: white;
  font-weight: 700;
  font-size: 0.9rem;
  padding: 4px 12px;
  border-radius: 20px;
  display: inline-block;
  margin-bottom: 12px;
  margin-left: -8px;
  z-index: 2;
}

.timeline-screenings {
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.timeline-item {
  display: flex;
  align-items: center;
  gap: 12px;
  background: var(--bg-white);
  border-radius: 8px;
  padding: 12px;
  box-shadow: var(--shadow-sm);
  border-left: 3px solid transparent;
  transition: all 0.2s;
}

.timeline-item:hover {
  box-shadow: var(--shadow-md);
  transform: translateX(4px);
}

.timeline-time {
  font-weight: 700;
  font-size: 1rem;
  color: var(--helios-red);
  min-width: 70px;
  display: flex;
  flex-direction: column;
  gap: 2px;
}

.timeline-end-time {
  font-size: 0.75rem;
  font-weight: 500;
  color: var(--text-muted);
  opacity: 0.8;
}

.timeline-last-icon {
  color: var(--helios-red);
  font-size: 14px;
  font-variation-settings: "FILL" 1;
  margin-right: 4px;
  display: inline-flex;
  align-items: center;
  vertical-align: middle;
  line-height: 1;
}

.timeline-content {
  display: flex;
  align-items: center;
  gap: 12px;
  flex: 1;
}

.timeline-poster {
  width: 40px;
  height: 60px;
  object-fit: cover;
  border-radius: 4px;
  flex-shrink: 0;
}

.timeline-info {
  flex: 1;
  min-width: 0;
}

.timeline-title {
  font-weight: 600;
  font-size: 0.95rem;
  color: var(--text-dark);
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.timeline-meta {
  display: flex;
  flex-wrap: wrap;
  gap: 6px 12px;
  margin-top: 4px;
  font-size: 0.8rem;
  align-items: center;
}

.timeline-hall {
  color: var(--text-muted);
}

.timeline-occupancy {
  font-weight: 600;
  padding: 2px 6px;
  border-radius: 4px;
}

.timeline-occupancy.low {
  background: rgba(0, 166, 81, 0.15);
  color: var(--helios-green-dark);
}

.timeline-occupancy.medium {
  background: rgba(255, 193, 7, 0.15);
  color: #d68a00;
}

.timeline-occupancy.high {
  background: rgba(227, 6, 19, 0.15);
  color: var(--helios-red);
}

/* NOW Indicator */
.timeline-now-indicator {
  display: flex;
  align-items: center;
  gap: 12px;
  margin: 24px 0;
  padding-left: 0;
}

.timeline-now-line {
  flex: 1;
  height: 2px;
  background: linear-gradient(90deg, var(--helios-red), transparent);
}

.timeline-now-line:last-child {
  background: linear-gradient(90deg, transparent, var(--helios-red));
}

.timeline-now-badge {
  display: flex;
  align-items: center;
  gap: 6px;
  background: var(--helios-red);
  color: white;
  font-weight: 700;
  font-size: 0.85rem;
  padding: 8px 16px;
  border-radius: 20px;
  box-shadow: 0 2px 8px rgba(227, 6, 19, 0.4);
  animation: nowPulse 2s ease-in-out infinite;
}

.timeline-now-badge .material-symbols-rounded {
  font-size: 18px;
}

@keyframes nowPulse {
  0%,
  100% {
    box-shadow: 0 2px 8px rgba(227, 6, 19, 0.4);
  }
  50% {
    box-shadow: 0 2px 16px rgba(227, 6, 19, 0.6);
  }
}

.timeline-now-badge.flash {
  animation: nowFlash 0.5s ease-out;
}

@keyframes nowFlash {
  0% {
    transform: scale(1);
    background: var(--helios-red);
  }
  50% {
    transform: scale(1.1);
    background: #ff3344;
  }
  100% {
    transform: scale(1);
    background: var(--helios-red);
  }
}

/* Past screenings */
.timeline-item.past {
  opacity: 0.5;
  border-left-color: var(--border-color);
}

.timeline-item.past .timeline-time {
  color: var(--text-muted);
}

/* =============================================
   AI INSIGHTS
   ============================================= */
.ai-insights-container {
  margin-top: 16px;
}

.ai-insights-intro {
  color: var(--text-muted);
  font-style: italic;
  margin-bottom: 16px;
}

.ai-insights-grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
  gap: 16px;
}

.ai-insight-card {
  display: flex;
  gap: 16px;
  background: var(--bg-white);
  border-radius: 12px;
  padding: 16px;
  box-shadow: var(--shadow-sm);
  border-left: 4px solid var(--helios-red);
  transition: all 0.2s;
}

.ai-insight-card:hover {
  box-shadow: var(--shadow-md);
  transform: translateY(-2px);
}

.ai-insight-card.confidence {
  border-left-color: #9c27b0;
  background: linear-gradient(135deg, #fff 0%, #f3e5f5 100%);
}

.insight-icon {
  width: 48px;
  height: 48px;
  display: flex;
  align-items: center;
  justify-content: center;
  background: rgba(227, 6, 19, 0.1);
  border-radius: 12px;
  flex-shrink: 0;
}

.insight-icon .material-symbols-rounded {
  font-size: 24px;
  color: var(--helios-red);
}

.ai-insight-card.confidence .insight-icon {
  background: rgba(156, 39, 176, 0.1);
}

.ai-insight-card.confidence .insight-icon .material-symbols-rounded {
  color: #9c27b0;
}

.insight-content h4 {
  font-size: 0.95rem;
  font-weight: 600;
  color: var(--text-dark);
  margin-bottom: 4px;
}

.insight-content p {
  font-size: 0.85rem;
  color: var(--text-muted);
  line-height: 1.4;
}

.insight-value {
  margin-top: 8px;
  font-size: 0.75rem;
  font-weight: 600;
  color: var(--helios-red);
  background: rgba(227, 6, 19, 0.1);
  padding: 2px 8px;
  border-radius: 4px;
  display: inline-block;
}

.ai-insights-note {
  margin-top: 24px;
  padding: 12px 16px;
  background: rgba(0, 0, 0, 0.03);
  border-radius: 8px;
  display: flex;
  align-items: center;
  gap: 12px;
  font-size: 0.85rem;
  color: var(--text-muted);
}

.ai-insights-note .material-symbols-rounded {
  color: var(--text-light);
  font-size: 20px;
}

.no-data {
  text-align: center;
  padding: 40px;
  color: var(--text-muted);
  font-style: italic;
}

/* AI Insights Timeline Styles */
.ai-stats-header {
  display: flex;
  gap: 12px;
  padding: 16px;
  background: linear-gradient(135deg, #1a1f36 0%, #2d3561 100%);
  border-radius: 12px;
  margin-bottom: 20px;
  flex-wrap: wrap;
}

.ai-stat {
  display: flex;
  align-items: center;
  gap: 10px;
  padding: 10px 14px;
  background: rgba(255, 255, 255, 0.08);
  border-radius: 8px;
  flex: 1;
  min-width: 100px;
}

.ai-stat .material-symbols-rounded {
  font-size: 24px;
  color: var(--helios-red);
}

.ai-stat .stat-value {
  font-size: 1.2rem;
  font-weight: 700;
  color: white;
}

.ai-stat .stat-label {
  font-size: 0.7rem;
  color: rgba(255, 255, 255, 0.6);
  text-transform: uppercase;
}

.ai-stat.good .material-symbols-rounded {
  color: #4caf50;
}
.ai-stat.medium .material-symbols-rounded {
  color: #ff9800;
}
.ai-stat.low .material-symbols-rounded {
  color: #f44336;
}

/* ========================================
   REDESIGNED TIMELINE v7 - Aurora Polished
   ======================================== */

/* Main Container */
.ai-insights-timeline {
  display: flex;
  flex-direction: column;
  gap: 40px; /* Increased card spacing */
  position: relative;
  padding-left: 32px; /* Adjusted for centered line */
  margin-top: 32px;
  padding-bottom: 40px;
  font-family: "Inter", sans-serif;
}

/* Timeline Line - "Dashed Gradient Guide" */
.ai-insights-timeline::before {
  content: "";
  position: absolute;
  left: 6px; /* Centered line */
  top: 0;
  bottom: 0;
  width: 2px;
  background-image: linear-gradient(
    to bottom,
    rgba(200, 200, 200, 0.5) 50%,
    rgba(255, 255, 255, 0) 0%
  );
  background-position: right;
  background-size: 2px 12px; /* Dashed effect */
  background-repeat: repeat-y;
  z-index: 0;
}

/* Item Structure */
.insight-timeline-item {
  display: flex;
  flex-direction: column;
  position: relative;
  padding-left: 24px;
}

/* Marker - "Hollow Ring" style, perfectly centered */
.insight-timeline-item::before {
  content: "";
  position: absolute;
  /* 
     Position Calculation:
     Container padding-left: 32px
     Line left: 6px
     Line width: 2px -> center at 7px
     Marker width: 14px -> center at 7px
     Marker left relative to container: 0px (7px center - 7px radius)
     Item starts at 32px
     Marker left relative to item: 0 - 32 = -32px
     Let's adjust visually to -31px to be safe.
  */
  left: -31px;
  top: 24px;
  width: 14px;
  height: 14px;
  border-radius: 50%;
  background: white; /* Center fill */
  border: 4px solid var(--marker-color, #ccc); /* Ring color */
  z-index: 2;
  box-shadow: 0 0 0 4px rgba(255, 255, 255, 0.5); /* Outer halo */
  transition: all 0.3s ease;
}

/* Colors for markers */
.insight-timeline-item.correction {
  --marker-color: #ff7043;
}
.insight-timeline-item.learning {
  --marker-color: #42a5f5;
}
.insight-timeline-item.verification {
  --marker-color: #66bb6a;
}
.insight-timeline-item.pattern {
  --marker-color: #ab47bc;
}
.insight-timeline-item.weekly_report {
  --marker-color: #26a69a;
}

.insight-timeline-item::before {
  border-color: var(--marker-color);
}

/* Hide old marker */
.insight-marker {
  display: none;
}

/* Aurora Card - Polished */
.insight-timeline-item .insight-content {
  background: white;
  border-radius: 16px;
  padding: 24px 32px; /* Wygodny padding */
  position: relative;
  border: 1px solid rgba(0, 0, 0, 0.04);
  /* Subtler colored shadows */
  box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.02),
    0 10px 15px -3px rgba(0, 0, 0, 0.02), 0 0 0 1px rgba(0, 0, 0, 0.02);
  transition: all 0.3s ease;
  color: #1e293b;
}

/* Colored bottom border accent instead of heavy shadow */
.insight-timeline-item .insight-content::after {
  content: "";
  position: absolute;
  bottom: 0;
  left: 32px;
  right: 32px;
  height: 3px;
  background: var(--marker-color);
  border-radius: 3px 3px 0 0;
  opacity: 0.3;
}

.insight-timeline-item .insight-content:hover {
  transform: translateY(-4px);
  box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.05),
    0 8px 10px -6px rgba(0, 0, 0, 0.01);
}
.insight-timeline-item .insight-content:hover::after {
  opacity: 0.8;
}

/* Content Layout */
.insight-content > h4 {
  font-family: "Inter", sans-serif;
  font-weight: 700;
  font-size: 1.15rem;
  color: #0f172a;
  margin: 8px 0 12px 0;
  letter-spacing: -0.02em;
}

.insight-content > p {
  color: #64748b;
  font-size: 0.95rem;
  line-height: 1.6;
  margin-bottom: 24px; /* More space before tags */
}

/* Factor Badges - "Modern Chip" Styling */
.insight-factors-badges {
  display: flex;
  flex-wrap: wrap;
  gap: 8px; /* Tighter gap for chips */
  margin-top: 24px;
  padding-top: 20px;
  border-top: 1px solid #f1f5f9;
}

.insight-factor-badge {
  display: inline-flex;
  align-items: center;
  gap: 4px;
  padding: 4px 6px;
  border-radius: 24px;
  background: white;
  border: 1px solid #e2e8f0;
  color: #334155;
  font-weight: 600;
  transition: all 0.2s;
}

.insight-factor-badge:hover {
  border-color: #cbd5e1;
  background: #f8fafc;
}

.insight-factor-badge .material-symbols-rounded {
  font-size: 14px;
  color: #94a3b8; /* Neutral icon color by default */
  font-variation-settings: "FILL" 1;
}

/* Tag Specifics */
.insight-factor-badge.positive {
  background: #f0fdf4;
  border-color: #bbf7d0;
  color: #15803d;
}
.insight-factor-badge.positive .material-symbols-rounded {
  color: #16a34a;
}

.insight-factor-badge.negative {
  background: #fef2f2;
  border-color: #fecaca;
  color: #b91c1c;
}
.insight-factor-badge.negative .material-symbols-rounded {
  color: #dc2626;
}

.insight-factor-badge .factor-impact {
  font-size: 0.8rem;
  font-weight: 700;
  border-radius: 20px;
  background: rgba(0, 0, 0, 0.05);
  margin-left: auto;
  padding: 2px 8px; /* Added padding for better look with bg */
}

/* User also requested factor-name styling, assumed global or within insight context */
.insight-content .factor-name {
  flex: 1;
  font-size: 0.8rem;
  color: #1a1f36;
  font-family: "Varela Round", sans-serif;
}

/* Auto-correction Tags - Unified with Factors but distinct */
.insight-correction-section,
.insight-multipliers-section,
.insight-adjustments-section {
  display: inline-flex;
  align-items: center;
  gap: 8px;
  padding: 6px 12px;
  border-radius: 8px;
  font-size: 0.8rem;
  font-weight: 600;
  margin: 8px 0px 0px 0px;
  background: #fff7ed;
  border: 1px solid #ffedd5;
  color: #c2410c;
}

.insight-multipliers-section {
  background: #fdf4ff; /* Light Purple Base */
  border: 1px solid #fae8ff;
  color: #86198f;
}

/* Badges (Top Right) - Light & Clean */
.insight-type-badge {
  position: absolute;
  top: 24px;
  right: 32px;
  font-size: 0.65rem;
  font-weight: 700;
  padding: 4px 10px;
  border-radius: 6px;
  background: #f1f5f9;
  color: #64748b;
  text-transform: uppercase;
  letter-spacing: 0.5px;
  border: 1px solid #e2e8f0;
}

.insight-type-badge.orange {
  background: #fff7ed;
  color: #c2410c;
  border-color: #ffedd5;
}
.insight-type-badge.blue {
  background: #eff6ff;
  color: #1d4ed8;
  border-color: #dbeafe;
}
.insight-type-badge.green {
  background: #f0fdf4;
  color: #15803d;
  border-color: #bbf7d0;
}
.insight-type-badge.purple {
  background: #faf5ff;
  color: #7e22ce;
  border-color: #f3e8ff;
}

/* Diff Indicator */
.insight-diff {
  position: absolute;
  bottom: 28px;
  right: 32px;
  font-size: 1.8rem;
  font-weight: 800;
  letter-spacing: -1px;
  opacity: 0.9;
}

/* Stats Cards styling */
/* Insight Movie attribution */
.insight-movie {
  font-size: 10px;
  display: flex;
  align-items: center;
  gap: 4px;
  color: #64748b;
  margin-top: 6px;
}
.insight-movie .material-symbols-rounded {
  font-size: 14px;
}

/* Report Metrics (verifications, corrections, etc.) */
.report-metrics {
  display: flex;
  align-items: center;
  gap: 8px;
  margin: 4px 0;
  flex-wrap: wrap;
}

.metric {
  font-size: 12px;
  display: flex;
  align-items: center;
  color: #64748b;
  gap: 4px;
}

.metric .material-symbols-rounded {
  font-size: 16px;
}

/* Report Trend Indicator */
.report-trend {
  display: flex;
  align-items: center;
  gap: 6px;
  margin-top: 8px;
  font-size: 0.9rem;
  font-weight: 600;
  padding: 4px 0;
}

.report-trend .material-symbols-rounded {
  font-size: 18px;
  font-variation-settings: "FILL" 1;
}

.report-trend.attention {
  color: #f97316;
} /* Orange */
.report-trend.excellent {
  color: #8b5cf6;
} /* Purple */
.report-trend.good {
  color: #16a34a;
} /* Green */
.report-trend.moderate {
  color: #64748b;
} /* Blue/Gray */

/* Stats Cards styling */
.report-stats-grid {
  display: flex;
  flex-wrap: wrap;
  gap: 12px;
  margin-top: 24px;
}

.report-stat {
  flex-grow: 1;
  background: white;
  border: 1px solid #e2e8f0;
  border-radius: 12px;
  padding: 12px;
  display: flex;
  flex-direction: column;
  align-items: center;
  text-align: center;
  transition: all 0.2s;
}

.report-stat .stat-value {
  font-size: 1.1rem;
  font-weight: 700;
  color: #0f172a;
  margin: 4px 0;
  letter-spacing: -0.03em;
}

.report-stat .stat-label {
  font-size: 0.65rem;
  text-transform: uppercase;
  letter-spacing: 0.5px;
  color: #64748b;
  font-weight: 600;
}

.report-stat .material-symbols-rounded {
  font-size: 20px;
  margin-bottom: 4px;
  color: #94a3b8;
}

/* Stats Card Variants */
.report-stat.primary {
  background-color: #fff7ed;
  border-color: #ffedd5;
  color: #c2420d;
}
.report-stat.primary .stat-value,
.report-stat.primary .stat-label,
.report-stat.primary .material-symbols-rounded {
  color: #c2420d;
}

.report-stat.success {
  background-color: #ecfdf5;
  border-color: #a7f3d0;
  color: #047857;
}
.report-stat.success .stat-value,
.report-stat.success .stat-label,
.report-stat.success .material-symbols-rounded {
  color: #047857;
}

.report-stat.warning {
  background-color: #fff1f2;
  border-color: #fecdd3;
  color: #be123c;
}
.report-stat.warning .stat-value,
.report-stat.warning .stat-label,
.report-stat.warning .material-symbols-rounded {
  color: #be123c;
}

.report-stat.neutral {
  background-color: #f8fafc;
  border-color: #e2e8f0;
  color: #334155;
}

/* Mobile */
@media (max-width: 768px) {
  .ai-insights-timeline {
    padding-left: 20px;
    gap: 32px;
  }
  .ai-insights-timeline::before {
    left: 10px;
  }
  .insight-timeline-item {
    padding-left: 16px;
  }
  .insight-timeline-item::before {
    left: -17px;
  } /* 20 + 16 = 36. Line at 10. Dist 26. Center 26 - 14/2 = 19? Check visually */

  .insight-content > h4 {
    padding-right: 0;
    margin-top: 32px;
  }
  .insight-type-badge {
    top: 20px;
    right: auto;
    left: 32px;
  }
  .insight-diff {
    position: relative;
    bottom: auto;
    right: auto;
    margin-top: 16px;
    text-align: right;
    display: block;
  }
}

/* Date filter for AI insights */
.ai-date-filter {
  display: flex;
  align-items: center;
  gap: 16px;
  padding: 12px 16px;
  background: linear-gradient(135deg, rgba(0, 0, 0, 0.02), rgba(0, 0, 0, 0.04));
  border-radius: 12px;
  margin-bottom: 16px;
  border: 1px solid rgba(0, 0, 0, 0.06);
  flex-wrap: wrap;
}

.filter-group {
  display: flex;
  align-items: center;
  gap: 8px;
}

.date-filter-label {
  display: flex;
  align-items: center;
  gap: 4px;
  font-size: 0.85rem;
  color: var(--text-muted);
  font-weight: 500;
  white-space: nowrap;
}

.date-filter-label .material-symbols-rounded {
  font-size: 18px;
  color: var(--helios-red);
}

.type-filter-wrapper {
  position: relative;
}

.type-filter-btn {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 8px 12px;
  border: 1px solid rgba(0, 0, 0, 0.12);
  border-radius: 8px;
  background: white;
  font-size: 0.85rem;
  color: var(--text-dark);
  cursor: pointer;
  min-width: 150px;
  transition: all 0.2s ease;
}

.type-filter-btn:hover {
  border-color: rgba(0, 0, 0, 0.2);
}

.type-filter-btn.open {
  border-color: var(--helios-red);
  box-shadow: 0 0 0 3px rgba(232, 33, 39, 0.1);
}

.type-filter-btn .material-symbols-rounded:first-child {
  font-size: 18px;
  color: var(--helios-red);
}

.type-filter-btn .type-filter-text {
  flex: 1;
  text-align: left;
}

.type-filter-btn .expand-icon {
  font-size: 18px;
  color: #999;
  transition: transform 0.2s ease;
}

.type-filter-btn.open .expand-icon {
  transform: rotate(180deg);
}

.type-filter-dropdown {
  position: absolute;
  top: 100%;
  left: 0;
  min-width: 100%;
  background: white;
  border: 1px solid rgba(0, 0, 0, 0.1);
  border-radius: 10px;
  margin-top: 4px;
  box-shadow: 0 8px 24px rgba(0, 0, 0, 0.15);
  z-index: 100;
  opacity: 0;
  visibility: hidden;
  transform: translateY(-8px);
  transition: all 0.2s ease;
}

.type-filter-dropdown.open {
  opacity: 1;
  visibility: visible;
  transform: translateY(0);
}

.type-option {
  display: flex;
  align-items: center;
  gap: 10px;
  padding: 10px 14px;
  cursor: pointer;
  font-size: 0.85rem;
  color: var(--text-dark);
  transition: background 0.15s ease;
}

.type-option:first-child {
  border-radius: 10px 10px 0 0;
}

.type-option:last-child {
  border-radius: 0 0 10px 10px;
}

.type-option:hover {
  background: rgba(232, 33, 39, 0.08);
}

.type-option .material-symbols-rounded {
  font-size: 18px;
  color: #666;
}

.date-filter-input-wrapper {
  position: relative;
  flex: 1;
  max-width: 180px;
}

.date-filter-input-wrapper input {
  width: 100%;
  padding: 10px 40px 10px 14px;
  border: 1px solid rgba(0, 0, 0, 0.12);
  border-radius: 10px;
  background: white;
  font-size: 0.9rem;
  color: var(--text-dark);
  transition: all 0.2s ease;
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.04);
}

.date-filter-input-wrapper input:focus {
  outline: none;
  border-color: var(--helios-red);
  box-shadow: 0 0 0 3px rgba(232, 33, 39, 0.1);
}

.date-filter-input-wrapper input::placeholder {
  color: #aaa;
}

.date-clear-btn {
  position: absolute;
  right: 8px;
  top: 50%;
  transform: translateY(-50%);
  background: none;
  border: none;
  padding: 4px;
  cursor: pointer;
  color: #999;
  border-radius: 50%;
  transition: all 0.2s ease;
  display: flex;
  align-items: center;
  justify-content: center;
}

.date-clear-btn:hover {
  background: rgba(0, 0, 0, 0.08);
  color: #666;
}

.date-clear-btn .material-symbols-rounded {
  font-size: 18px;
}

.date-suggestions {
  position: absolute;
  top: 100%;
  left: 0;
  right: 0;
  background: white;
  border: 1px solid rgba(0, 0, 0, 0.1);
  border-radius: 10px;
  margin-top: 4px;
  max-height: 240px;
  overflow-y: auto;
  box-shadow: 0 8px 24px rgba(0, 0, 0, 0.15);
  z-index: 100;
  opacity: 0;
  visibility: hidden;
  transform: translateY(-8px);
  transition: all 0.2s ease;
}

.date-suggestions.open {
  opacity: 1;
  visibility: visible;
  transform: translateY(0);
}

.date-suggestion-item {
  display: flex;
  align-items: center;
  gap: 10px;
  padding: 10px 14px;
  cursor: pointer;
  font-size: 0.9rem;
  color: var(--text-dark);
  transition: background 0.15s ease;
}

.date-suggestion-item:first-child {
  border-radius: 10px 10px 0 0;
}

.date-suggestion-item:last-child {
  border-radius: 0 0 10px 10px;
}

.date-suggestion-item:only-child {
  border-radius: 10px;
}

.date-suggestion-item:hover,
.date-suggestion-item.selected {
  background: rgba(232, 33, 39, 0.08);
}

.date-suggestion-item.selected {
  color: var(--helios-red);
  font-weight: 500;
}

.date-suggestion-item .material-symbols-rounded {
  font-size: 18px;
  color: #999;
}

.date-suggestion-item.selected .material-symbols-rounded {
  color: var(--helios-red);
}

.date-suggestion-empty {
  padding: 16px;
  text-align: center;
  color: var(--text-muted);
  font-size: 0.85rem;
}

.date-filter-count {
  font-size: 0.85rem;
  color: var(--text-muted);
  white-space: nowrap;
  padding: 6px 12px;
  background: rgba(0, 0, 0, 0.04);
  border-radius: 8px;
}

.date-filter-count span {
  font-weight: 600;
  color: var(--helios-red);
}

.ai-insights-empty .material-symbols-rounded {
  font-size: 48px;
  color: var(--helios-red);
  margin-bottom: 16px;
}

.ai-insights-empty h3 {
  font-size: 1.1rem;
  color: var(--text-dark);
  margin-bottom: 8px;
}

/* Mobile adjustments for timeline */
@media (max-width: 600px) {
  .timeline-item {
    flex-wrap: wrap;
  }

  .timeline-time {
    width: 100%;
    margin-bottom: 8px;
  }

  .timeline-poster {
    width: 32px;
    height: 48px;
  }

  .ai-insights-grid {
    grid-template-columns: 1fr;
  }

  /* Mobile: Date filter stacks vertically */
  .ai-date-filter {
    flex-direction: column;
    align-items: stretch;
    gap: 10px;
    padding: 12px;
  }

  .date-filter-label {
    justify-content: center;
  }

  .date-filter-input-wrapper {
    max-width: none;
  }

  .date-filter-count {
    text-align: center;
  }

  /* Mobile: AI Stats header */
  .ai-stats-header {
    flex-wrap: wrap;
    gap: 8px;
  }

  .ai-stat {
    flex: 1 1 45%;
    min-width: 80px;
    padding: 10px;
  }

  /* Mobile: Insight timeline items */
  .insight-timeline-item {
    flex-direction: column;
    align-items: flex-start;
    gap: 8px;
  }

  .insight-date {
    flex-direction: row;
    gap: 8px;
    width: 100%;
    padding-bottom: 8px;
    border-bottom: 1px solid rgba(0, 0, 0, 0.06);
  }

  .insight-date .date {
    font-size: 0.85rem;
  }

  .insight-date .time {
    font-size: 0.75rem;
  }

  .insight-marker {
    width: 40px;
    height: 40px;
    left: -52px;
    top: 12px;
  }

  .insight-marker .material-symbols-rounded {
    font-size: 18px;
  }

  .insight-content {
    width: 100%;
  }

  .insight-content h4 {
    font-size: 0.95rem;
    margin-bottom: 6px;
  }

  .insight-content p {
    font-size: 0.85rem;
    line-height: 1.4;
  }

  /* Mobile: Factor badges wrap better */
  .insight-factors-badges {
    gap: 6px;
  }

  .insight-factor-badge {
    padding: 5px 10px;
    font-size: 0.75rem;
  }

  .insight-factor-badge .material-symbols-rounded {
    font-size: 14px;
  }

  /* Mobile: Modifiers section */
  .insight-multipliers-section,
  .insight-factors-section {
    font-size: 0.8rem;
    padding: 8px 10px;
  }
}

/* ============================================
   Offline Badge & Footer Install Button
   ============================================ */

.offline-badge {
  position: fixed;
  top: 60px;
  left: 50%;
  transform: translateX(-50%);
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 10px 18px;
  background: linear-gradient(135deg, #ff6b35 0%, #f7931a 100%);
  color: white;
  border-radius: 25px;
  font-size: 0.8rem;
  font-weight: 600;
  box-shadow: 0 4px 15px rgba(255, 107, 53, 0.4);
  z-index: 1000;
  animation: slideDown 0.3s ease;
}

.offline-badge .material-symbols-rounded {
  font-size: 18px;
}

@keyframes slideDown {
  from {
    opacity: 0;
    transform: translateX(-50%) translateY(-20px);
  }
  to {
    opacity: 1;
    transform: translateX(-50%) translateY(0);
  }
}

/* Subtle install button in footer */
.footer-install-btn {
  display: inline-flex;
  align-items: center;
  gap: 6px;
  margin-left: auto;
  padding: 6px 12px;
  background: rgba(227, 6, 19, 0.15);
  border: 1px solid rgba(227, 6, 19, 0.3);
  border-radius: 6px;
  color: var(--helios-red);
  font-size: 0.75rem;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.2s;
}

.footer-install-btn:hover {
  background: var(--helios-red);
  color: white;
  border-color: var(--helios-red);
}

.footer-install-btn .material-symbols-rounded {
  font-size: 16px;
}

/* Adjust footer content to accommodate button */
.footer-content {
  display: flex;
  align-items: center;
  gap: 8px;
  flex-wrap: wrap;
}

/* Mobile footer install button */
@media (max-width: 600px) {
  .footer-content {
    flex-direction: column;
    text-align: center;
    justify-content: center;
  }

  .footer-install-btn {
    margin-left: 0;
    margin-top: 6px;
    padding: 5px 10px;
    font-size: 0.7rem;
  }
}

/* Install Modal */
.install-modal {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: rgba(0, 0, 0, 0.8);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 2000;
  padding: 20px;
}

.install-modal-content {
  background: var(--bg-dark, #1a1f36);
  border-radius: 16px;
  max-width: 340px;
  width: 100%;
  overflow: hidden;
  animation: modalSlideUp 0.3s ease;
}

@keyframes modalSlideUp {
  from {
    opacity: 0;
    transform: translateY(30px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.install-modal-header {
  display: flex;
  align-items: center;
  gap: 10px;
  padding: 16px;
  background: var(--helios-red);
  color: white;
}

.install-modal-header h3 {
  flex: 1;
  margin: 0;
  font-size: 1rem;
}

.install-modal-header .material-symbols-rounded {
  font-size: 24px;
}

.install-modal-header .close-btn {
  background: rgba(255, 255, 255, 0.2);
  border: none;
  border-radius: 50%;
  width: 32px;
  height: 32px;
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  color: white;
}

.install-instructions {
  padding: 20px;
  color: white;
}

.install-instructions p {
  margin: 0 0 12px 0;
  font-size: 0.9rem;
}

.install-instructions ol {
  margin: 0;
  padding-left: 20px;
}

.install-instructions li {
  margin-bottom: 10px;
  font-size: 0.85rem;
  line-height: 1.5;
}

.install-modal-btn {
  width: 100%;
  padding: 14px;
  background: var(--helios-red);
  border: none;
  color: white;
  font-size: 0.9rem;
  font-weight: 600;
  cursor: pointer;
}

.install-modal-btn:hover {
  background: var(--helios-red-dark);
}

/* AI Charts - Premium Styling */
.ai-charts-container {
  display: flex;
  flex-direction: row;
  flex-wrap: wrap;
  gap: 24px;
  margin-bottom: 28px;
}

.chart-controls {
  display: inline-flex;
  background: #ffffff;
  padding: 4px;
  border-radius: 24px;
  gap: 0;
}

.chart-range-btn {
  background: transparent;
  border: none;
  color: #64748b;
  padding: 8px 16px;
  border-radius: 24px;
  font-size: 0.85rem;
  font-weight: 500;
  cursor: pointer;
  transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
  font-family: inherit;
  min-width: 60px;
}

.chart-range-btn:hover {
  color: #334155;
  background: rgba(0, 0, 0, 0.05); /* Subtle hover */
}

.chart-range-btn.active {
  background: var(--helios-red);
  color: #ffffff;
  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1), 0 1px 2px -1px rgba(0, 0, 0, 0.1);
  font-weight: 600;
}

#chart-end-date,
#chart-year-select {
  appearance: none;
  -webkit-appearance: none;
  background-color: white;
  border: 1px solid #e2e8f0;
  border-radius: 24px;
  padding: 8px 16px;
  font-family: inherit;
  color: #1e293b;
  font-size: 0.9rem;
  font-weight: 500;
  outline: none;
  cursor: pointer;
  transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.03);
  background-image: none;
}

#chart-year-select {
  padding-right: 32px;
  background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='%2364748b'%3E%3Cpath d='M7 10l5 5 5-5z'/%3E%3C/svg%3E");
  background-repeat: no-repeat;
  background-position: right 8px center;
  background-size: 20px;
}

#chart-end-date::-webkit-calendar-picker-indicator {
  cursor: pointer;
  filter: invert(48%) sepia(13%) saturate(3207%) hue-rotate(330deg)
    brightness(95%) contrast(80%); /* Helios Red approximation */
  opacity: 0.6;
  transition: opacity 0.2s;
}
#chart-end-date::-webkit-calendar-picker-indicator:hover {
  opacity: 1;
}

#chart-end-date:hover,
#chart-year-select:hover {
  border-color: #cbd5e1;
  background-color: #f8fafc;
}

#chart-end-date:focus,
#chart-year-select:focus {
  border-color: var(--helios-red);
  box-shadow: 0 0 0 4px rgba(220, 38, 38, 0.1);
  background-color: white;
}

#chart-extra-controls span {
  font-weight: 500;
  color: #64748b;
}

.chart-wrapper {
  background: linear-gradient(135deg, #ffffff 0%, #fafbfc 100%);
  border-radius: 16px;
  padding: 20px;
  box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.05),
    0 10px 15px -3px rgba(0, 0, 0, 0.05), 0 0 0 1px rgba(0, 0, 0, 0.03);
  height: 320px;
  position: relative;
  border: none;
  display: flex;
  flex-direction: column;
  transition: transform 0.3s ease, box-shadow 0.3s ease;
  flex: 1 1 500px; /* Grow, Shrink, Basis 500px */
  min-width: 0; /* Prevent flex overflow */
}

.chart-wrapper:hover {
  transform: translateY(-2px);
  box-shadow: 0 8px 12px -2px rgba(0, 0, 0, 0.08),
    0 16px 24px -4px rgba(0, 0, 0, 0.06), 0 0 0 1px rgba(0, 0, 0, 0.04);
}

.chart-wrapper canvas {
  flex: 1;
  width: 100% !important;
  height: 100% !important;
}

@media (max-width: 768px) {
  .ai-charts-container {
    grid-template-columns: 1fr;
    gap: 16px;
  }
  .chart-wrapper {
    height: 280px;
    padding: 16px;
    width: 100%;
    overflow: hidden;
    border-radius: 14px;
  }
  .chart-wrapper:hover {
    transform: none;
  }
}

/* Custom Chart Tooltips */
.custom-chart-tooltip {
  position: absolute;
  z-index: 99999;
  background: rgba(17, 24, 39, 0.95);
  backdrop-filter: blur(8px);
  -webkit-backdrop-filter: blur(8px);
  border: 1px solid rgba(255, 255, 255, 0.1);
  border-radius: 12px;
  padding: 0;
  min-width: 160px;
  max-width: calc(100vw - 20px); /* Prevent overflow on mobile */
  box-shadow: 0 10px 25px -5px rgba(0, 0, 0, 0.3),
    0 8px 10px -6px rgba(0, 0, 0, 0.2);
  opacity: 0;
  pointer-events: none;
  transition: opacity 0.2s ease, transform 0.2s ease;
  transform: translateY(4px);
  font-family: "Outfit", sans-serif;
  overflow: hidden;
  word-wrap: break-word;
}

.custom-chart-tooltip[style*="opacity: 1"] {
  transform: translateY(0);
}

.custom-chart-tooltip .tooltip-header {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 10px 14px;
  background: rgba(255, 255, 255, 0.05);
  border-bottom: 1px solid rgba(255, 255, 255, 0.08);
}

.custom-chart-tooltip .tooltip-header .tooltip-icon {
  color: #9ca3af;
  font-size: 18px;
}

.custom-chart-tooltip .tooltip-date {
  color: #f3f4f6;
  font-weight: 600;
  font-size: 14px;
}

.custom-chart-tooltip .tooltip-body {
  padding: 12px 14px;
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.custom-chart-tooltip .tooltip-row {
  display: flex;
  align-items: center;
  gap: 10px;
}

.custom-chart-tooltip .tooltip-icon {
  font-size: 20px;
  flex-shrink: 0;
}

.custom-chart-tooltip .tooltip-label {
  color: #d1d5db;
  font-size: 13px;
  line-height: 1.4;
}

.custom-chart-tooltip .tooltip-label strong {
  color: #ffffff;
  font-weight: 600;
}

.custom-chart-tooltip .tooltip-divider {
  height: 1px;
  background: rgba(255, 255, 255, 0.1);
  margin: 4px 0;
}

/* Onboarding Modal */
.onboarding-overlay {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: rgba(0, 0, 0, 0.6);
  z-index: 2000;
  display: flex;
  align-items: center;
  justify-content: center;
  opacity: 0;
  pointer-events: none;
  transition: opacity 0.3s ease;
  backdrop-filter: blur(4px);
  -webkit-backdrop-filter: blur(4px);
  padding: 20px;
}

.onboarding-overlay.visible {
  opacity: 1;
  pointer-events: all;
}

.onboarding-modal {
  background: white;
  width: 100%;
  max-width: 450px;
  border-radius: 24px;
  padding: 32px 24px;
  box-shadow: 0 10px 40px rgba(0, 0, 0, 0.2);
  transform: translateY(20px);
  transition: transform 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
  display: flex;
  flex-direction: column;
  gap: 24px;
}

.onboarding-overlay.visible .onboarding-modal {
  transform: translateY(0);
}

.onboarding-header {
  text-align: center;
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 16px;
}

.onboarding-icon {
  width: 64px;
  height: 64px;
  background: linear-gradient(135deg, var(--helios-red), #ff5252);
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  box-shadow: 0 8px 16px rgba(227, 6, 19, 0.25);
}

.onboarding-icon .material-symbols-rounded {
  font-size: 32px;
  color: white;
}

.onboarding-header h2 {
  font-size: 1.5rem;
  font-weight: 700;
  color: var(--text-dark);
  margin: 0;
}

.onboarding-content p {
  text-align: center;
  color: var(--text-muted);
  margin-bottom: 24px;
  line-height: 1.5;
}

.onboarding-steps {
  display: flex;
  flex-direction: column;
  gap: 16px;
}

.step-item {
  display: flex;
  align-items: flex-start;
  gap: 16px;
  padding: 12px;
  background: #f8f9fa;
  border-radius: 12px;
  border: 1px solid rgba(0, 0, 0, 0.03);
}

.step-icon {
  font-size: 24px;
  color: var(--helios-red);
  background: white;
  padding: 8px;
  border-radius: 8px;
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
}

.step-text {
  flex: 1;
  display: flex;
  flex-direction: column;
  gap: 4px;
}

.step-text strong {
  font-size: 0.95rem;
  color: var(--text-dark);
}

.step-text span {
  font-size: 0.85rem;
  color: var(--text-muted);
  line-height: 1.4;
}

/* Expand Prediction Details Button */
.expand-details-btn {
  display: flex;
  align-items: center;
  gap: 6px;
  margin-left: auto;
  padding: 6px 12px;
  background: rgba(255, 255, 255, 0.15);
  border: 1px solid rgba(255, 255, 255, 0.3);
  border-radius: 20px;
  color: white;
  font-size: 0.85rem;
  font-weight: 500;
  cursor: pointer;
  transition: all 0.2s;
  backdrop-filter: blur(4px);
  -webkit-backdrop-filter: blur(4px);
}

.expand-details-btn:hover {
  background: rgba(255, 255, 255, 0.25);
  border-color: rgba(255, 255, 255, 0.5);
  transform: translateY(-1px);
}

.expand-details-btn .material-symbols-rounded {
  font-size: 18px;
}

@media (max-width: 480px) {
  .expand-details-btn .btn-text {
    display: none;
  }
  .expand-details-btn {
    padding: 6px;
    border-radius: 50%;
    aspect-ratio: 1;
    justify-content: center;
  }
}

/* Onboarding Interactive Styles */
.onboarding-modal {
  background: white;
  width: 100%;
  max-width: 500px;
  border-radius: 28px;
  padding: 32px;
  box-shadow: 0 20px 60px rgba(0, 0, 0, 0.25);
  transform: translateY(20px);
  transition: transform 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
  display: flex;
  flex-direction: column;
  gap: 24px;
  position: relative;
  overflow: hidden;
}

.onboarding-progress {
  display: flex;
  justify-content: center;
  gap: 8px;
  margin-bottom: 8px;
}

.progress-dot {
  width: 8px;
  height: 8px;
  border-radius: 50%;
  background: rgba(0, 0, 0, 0.1);
  transition: all 0.3s ease;
}

.progress-dot.active {
  background: var(--helios-red);
  transform: scale(1.3);
}

.progress-dot.completed {
  background: var(--helios-red);
  opacity: 0.5;
}

.onboarding-overlay.visible .onboarding-modal {
  transform: translateY(0);
}

.onboarding-header {
  text-align: center;
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 20px;
}

.onboarding-icon {
  width: 90px;
  height: 90px;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  box-shadow: 0 12px 30px rgba(0, 0, 0, 0.15);
  transition: background 0.4s ease, transform 0.3s ease;
  animation: icon-float 3s ease-in-out infinite;
  position: relative;
}

.onboarding-icon::before {
  content: "";
  position: absolute;
  inset: -8px;
  border-radius: 50%;
  border: 2px dashed rgba(255, 255, 255, 0.3);
  animation: icon-spin 10s linear infinite;
}

@keyframes icon-float {
  0%,
  100% {
    transform: translateY(0);
  }
  50% {
    transform: translateY(-8px);
  }
}

@keyframes icon-spin {
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
}

@keyframes confetti-fall {
  0% {
    transform: translateY(0) rotate(0deg);
    opacity: 1;
  }
  100% {
    transform: translateY(100vh) rotate(720deg);
    opacity: 0;
  }
}

.onboarding-icon .material-symbols-rounded {
  font-size: 40px;
  color: white;
}

.onboarding-header h2 {
  font-size: 1.5rem;
  font-weight: 700;
  color: var(--text-dark);
  margin: 0;
  letter-spacing: -0.02em;
}

/* Progress Bar */
.onboarding-progress-bar {
  height: 4px;
  background: rgba(0, 0, 0, 0.08);
  border-radius: 2px;
  overflow: hidden;
  margin-bottom: 8px;
}

.onboarding-progress-fill {
  height: 100%;
  background: linear-gradient(90deg, #d32f2f, #ff5252);
  border-radius: 2px;
  transition: width 0.4s ease;
}

.onboarding-step-counter {
  text-align: center;
  font-size: 0.75rem;
  font-weight: 600;
  color: var(--text-muted);
  text-transform: uppercase;
  letter-spacing: 0.5px;
  margin-bottom: 12px;
}

/* Content Area */
.onboarding-content {
  display: flex;
  flex-direction: column;
  gap: 16px;
}

.onboarding-subtitle {
  text-align: center;
  color: var(--text-muted);
  font-size: 1rem;
  line-height: 1.5;
  margin: 0;
}

.onboarding-description {
  text-align: center;
  color: var(--text-dark);
  font-size: 1rem;
  line-height: 1.5;
  margin: 0 0 8px 0;
}

.onboarding-message {
  text-align: center;
  color: var(--text-muted);
  font-size: 0.9rem;
  margin: 8px 0 0 0;
}

/* Feature Items (Welcome) */
.onboarding-features {
  display: flex;
  flex-direction: column;
  gap: 10px;
  margin-top: 8px;
}

.onboarding-feature-item {
  display: flex;
  align-items: center;
  gap: 12px;
  padding: 12px 16px;
  background: linear-gradient(135deg, #f8f9fa 0%, #fff 100%);
  border-radius: 12px;
  border: 1px solid rgba(0, 0, 0, 0.05);
}

.onboarding-feature-item .material-symbols-rounded {
  font-size: 24px;
  color: var(--helios-red);
}

.onboarding-feature-item span:last-child {
  font-weight: 500;
  color: var(--text-dark);
}

/* Details List */
.onboarding-details {
  list-style: none;
  padding: 0;
  margin: 0;
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.onboarding-details li {
  display: flex;
  align-items: flex-start;
  gap: 10px;
  font-size: 0.9rem;
  color: var(--text-dark);
  line-height: 1.4;
}

.onboarding-details li .material-symbols-rounded {
  font-size: 18px;
  color: #4caf50;
  flex-shrink: 0;
  margin-top: 2px;
}

/* Tip Box */
.onboarding-tip {
  display: flex;
  align-items: flex-start;
  gap: 10px;
  padding: 12px 14px;
  background: linear-gradient(135deg, #fffde7 0%, #fff8e1 100%);
  border-radius: 10px;
  border-left: 3px solid #ffc107;
  margin-top: 8px;
}

.onboarding-tip .material-symbols-rounded {
  font-size: 20px;
  color: #ffa000;
  flex-shrink: 0;
}

.onboarding-tip span:last-child {
  font-size: 0.85rem;
  color: #5d4037;
  line-height: 1.4;
}

.onboarding-footer-actions {
  display: flex;
  align-items: center;
  justify-content: space-between;
  margin-top: 24px;
  gap: 16px;
  padding-top: 20px;
  border-top: 1px solid rgba(0, 0, 0, 0.06);
}

.text-btn {
  display: inline-flex;
  align-items: center;
  gap: 6px;
  background: transparent;
  border: 1px solid rgba(0, 0, 0, 0.12);
  color: var(--text-muted);
  font-weight: 600;
  font-size: 0.9rem;
  font-family: inherit;
  cursor: pointer;
  padding: 10px 18px;
  border-radius: 10px;
  transition: all 0.2s ease;
}

.text-btn:hover {
  background: rgba(0, 0, 0, 0.04);
  border-color: rgba(0, 0, 0, 0.2);
  color: var(--text-dark);
}

.text-btn .material-symbols-rounded {
  font-size: 18px;
}

.onboarding-footer-actions .primary-btn {
  display: inline-flex;
  align-items: center;
  gap: 8px;
  padding: 12px 28px;
  font-size: 1rem;
  font-weight: 600;
  font-family: inherit;
  border-radius: 12px;
  background: linear-gradient(135deg, var(--helios-red) 0%, #b71c1c 100%);
  color: white;
  border: none;
  cursor: pointer;
  transition: all 0.25s ease;
  box-shadow: 0 4px 12px rgba(211, 47, 47, 0.25);
}

.onboarding-footer-actions .primary-btn:hover {
  background: linear-gradient(135deg, #e53935 0%, #c62828 100%);
  box-shadow: 0 6px 16px rgba(211, 47, 47, 0.35);
  transform: translateY(-1px);
}

.onboarding-footer-actions .primary-btn:active {
  transform: translateY(0);
  box-shadow: 0 2px 8px rgba(211, 47, 47, 0.25);
}

.onboarding-footer-actions .primary-btn .material-symbols-rounded {
  font-size: 20px;
}

/* Factor Explanation Panel */
.factor-explanation-panel {
  background: white;
  border-radius: 16px;
  box-shadow: 0 2px 12px rgba(0, 0, 0, 0.06);
  margin-bottom: 20px;
  overflow: hidden;
  border: 1px solid rgba(0, 0, 0, 0.05);
}

.factor-panel-header {
  display: flex;
  align-items: center;
  gap: 12px;
  padding: 16px 20px;
  cursor: pointer;
  transition: background 0.2s;
  background: linear-gradient(135deg, #f8f9fa 0%, #fff 100%);
}

.factor-panel-header:hover {
  background: #f0f4f8;
}

.factor-panel-header .material-symbols-rounded:first-child {
  font-size: 24px;
  color: #ffc107;
}

.factor-panel-header h3 {
  flex: 1;
  margin: 0;
  font-size: 1rem;
  font-weight: 600;
  color: var(--text-dark);
}

.factor-count {
  font-size: 0.8rem;
  color: var(--text-muted);
  background: rgba(0, 0, 0, 0.05);
  padding: 4px 10px;
  border-radius: 12px;
}

.factor-panel-header .expand-icon {
  color: var(--text-muted);
  transition: transform 0.3s;
}

.factor-explanation-panel.expanded .factor-panel-header .expand-icon {
  transform: rotate(180deg);
}

.factor-cards-grid {
  display: none;
  grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));
  gap: 16px;
  padding: 16px 20px 20px;
}

.factor-explanation-panel.expanded .factor-cards-grid {
  display: grid;
  animation: fadeInDown 0.3s ease;
}

@keyframes fadeInDown {
  from {
    opacity: 0;
    transform: translateY(-10px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

/* [Legacy factor-card styles removed to fix conflict with main definition] */

@media (max-width: 600px) {
  .factor-cards-grid {
    grid-template-columns: 1fr;
  }
  .factor-panel-header {
    padding: 14px 16px;
  }
  .factor-count {
    display: none;
  }
}

/* ============================================
   All Factors Panel (Czynniki) - Dark Cinema Theme
   ============================================ */

.all-factors-panel {
  background: linear-gradient(145deg, #1a1a2e 0%, #16213e 100%);
  border-radius: 20px;
  margin-bottom: 20px;
  overflow: hidden;
  border: 1px solid rgba(211, 47, 47, 0.2);
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
}

.all-factors-header {
  display: flex;
  align-items: center;
  gap: 12px;
  padding: 18px 22px;
  cursor: pointer;
  transition: all 0.3s ease;
  background: linear-gradient(
    135deg,
    rgba(211, 47, 47, 0.15) 0%,
    transparent 100%
  );
  border-bottom: 1px solid rgba(255, 255, 255, 0.05);
}

.all-factors-header:hover {
  background: linear-gradient(
    135deg,
    rgba(211, 47, 47, 0.25) 0%,
    rgba(211, 47, 47, 0.05) 100%
  );
}

.all-factors-header .material-symbols-rounded:first-child {
  font-size: 26px;
  color: #d32f2f;
  filter: drop-shadow(0 0 8px rgba(211, 47, 47, 0.4));
}

.all-factors-header h3 {
  flex: 1;
  margin: 0;
  font-size: 1.05rem;
  font-weight: 600;
  color: #fff;
  letter-spacing: 0.3px;
}

.factors-stats {
  font-size: 0.75rem;
  color: #d32f2f;
  background: rgba(211, 47, 47, 0.15);
  padding: 5px 14px;
  border-radius: 20px;
  font-weight: 600;
  border: 1px solid rgba(211, 47, 47, 0.3);
}

.all-factors-header .expand-icon {
  color: rgba(255, 255, 255, 0.5);
  transition: transform 0.3s ease;
}

.all-factors-panel.expanded .all-factors-header .expand-icon {
  transform: rotate(180deg);
  color: #d32f2f;
}

.all-factors-content {
  display: none;
  padding: 0 22px 22px;
}

.all-factors-panel.expanded .all-factors-content {
  display: block;
  animation: slideDown 0.4s ease;
}

/* Explainer Section - How factors work */
.factors-explainer {
  background: rgba(255, 255, 255, 0.04);
  border-radius: 14px;
  padding: 18px;
  margin-bottom: 16px;
  border: 1px solid rgba(255, 255, 255, 0.08);
}

.explainer-title {
  display: flex;
  align-items: center;
  gap: 10px;
  font-size: 0.95rem;
  font-weight: 600;
  color: #fff;
  margin-bottom: 14px;
}

.explainer-title .material-symbols-rounded {
  font-size: 22px;
  color: #ffc107;
}

.explainer-content p {
  margin: 0 0 12px 0;
  font-size: 0.88rem;
  color: rgba(255, 255, 255, 0.7);
  line-height: 1.5;
}

.explainer-content p strong {
  color: #fff;
}

.explainer-example {
  background: rgba(0, 0, 0, 0.25);
  border-radius: 10px;
  padding: 14px;
  margin: 12px 0;
}

.example-row {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 6px 0;
  font-size: 0.88rem;
}

.example-row.highlight {
  background: rgba(76, 175, 80, 0.12);
  margin: 6px -10px;
  padding: 8px 10px;
  border-radius: 8px;
}

.example-row.result {
  border-top: 1px solid rgba(255, 255, 255, 0.1);
  margin-top: 8px;
  padding-top: 10px;
}

.example-label {
  color: rgba(255, 255, 255, 0.6);
}

.example-value {
  color: #fff;
  font-weight: 500;
  font-family: "SF Mono", "Monaco", monospace;
}

.example-value strong {
  color: #81c784;
}

/* Text color utilities */
.text-positive {
  color: #81c784;
  font-weight: 600;
}

.text-negative {
  color: #ef9a9a;
  font-weight: 600;
}

.explainer-note {
  font-size: 0.82rem !important;
  color: rgba(255, 255, 255, 0.5) !important;
  margin-top: 12px !important;
  margin-bottom: 0 !important;
}

/* Counters Bar */
.factors-counters {
  display: grid;
  grid-template-columns: repeat(4, 1fr);
  gap: 12px;
  margin-bottom: 18px;
}

.counter-item {
  display: flex;
  align-items: center;
  gap: 10px;
  background: rgba(0, 0, 0, 0.25);
  padding: 12px 14px;
  border-radius: 12px;
  border: 1px solid rgba(255, 255, 255, 0.06);
}

.counter-item .material-symbols-rounded {
  font-size: 22px;
  color: #d32f2f;
}

.counter-data {
  display: flex;
  flex-direction: column;
}

.counter-value {
  font-size: 1.1rem;
  font-weight: 700;
  color: #fff;
  line-height: 1.2;
}

.counter-label {
  font-size: 0.7rem;
  color: rgba(255, 255, 255, 0.5);
  text-transform: uppercase;
  letter-spacing: 0.3px;
}

/* Learned mark icon */
.learned-mark {
  font-size: 14px;
  color: #ffc107;
  margin-right: 4px;
}

.factor-value-card.learned {
  border-color: rgba(255, 193, 7, 0.4);
}

@media (max-width: 700px) {
  .factors-counters {
    grid-template-columns: repeat(2, 1fr);
  }
}

@media (max-width: 450px) {
  .factors-counters {
    grid-template-columns: 1fr 1fr;
    gap: 8px;
  }

  .counter-item {
    padding: 10px 12px;
  }

  .counter-value {
    font-size: 1rem;
  }
}

@keyframes slideDown {
  from {
    opacity: 0;
    transform: translateY(-15px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.factors-intro {
  padding: 16px 0;
  border-bottom: 1px solid rgba(255, 255, 255, 0.06);
  margin-bottom: 18px;
}

.factors-intro p {
  margin: 0;
  font-size: 0.88rem;
  color: rgba(255, 255, 255, 0.6);
  line-height: 1.6;
}

.learning-stats {
  display: inline-flex;
  align-items: center;
  gap: 8px;
  margin-top: 12px;
  padding: 8px 16px;
  background: linear-gradient(
    135deg,
    rgba(76, 175, 80, 0.2) 0%,
    rgba(76, 175, 80, 0.1) 100%
  );
  border-radius: 25px;
  font-size: 0.82rem;
  color: #81c784;
  font-weight: 500;
  border: 1px solid rgba(76, 175, 80, 0.3);
}

.learning-stats .material-symbols-rounded {
  font-size: 18px;
}

.factors-categories {
  display: flex;
  flex-direction: column;
  gap: 16px;
}

.factor-category {
  background: rgba(255, 255, 255, 0.03);
  border-radius: 14px;
  padding: 16px 18px;
  border: 1px solid rgba(255, 255, 255, 0.06);
  transition: all 0.3s ease;
}

.factor-category:hover {
  background: rgba(255, 255, 255, 0.05);
  border-color: rgba(211, 47, 47, 0.2);
}

.category-header {
  display: flex;
  align-items: center;
  gap: 12px;
  margin-bottom: 10px;
}

.category-header .material-symbols-rounded {
  font-size: 22px;
  color: #d32f2f;
  background: rgba(211, 47, 47, 0.12);
  padding: 8px;
  border-radius: 10px;
}

.category-name {
  flex: 1;
  font-weight: 700;
  font-size: 0.95rem;
  color: #fff;
}

.category-count {
  font-size: 0.7rem;
  color: rgba(255, 255, 255, 0.5);
  background: rgba(255, 255, 255, 0.08);
  padding: 4px 10px;
  border-radius: 12px;
}

.category-description {
  margin: 0 0 14px 0;
  font-size: 0.8rem;
  color: rgba(255, 255, 255, 0.45);
  line-height: 1.5;
}

/* Factor values as horizontal pills/chips */
.factor-values-grid {
  display: flex;
  flex-wrap: wrap;
  gap: 8px;
}

.factor-value-card {
  display: inline-flex;
  align-items: center;
  gap: 8px;
  background: rgba(0, 0, 0, 0.3);
  border-radius: 25px;
  padding: 8px 14px;
  border: 1px solid rgba(255, 255, 255, 0.08);
  transition: all 0.2s ease;
  cursor: default;
}

.factor-value-card:hover {
  transform: scale(1.02);
  border-color: rgba(255, 255, 255, 0.15);
  background: rgba(0, 0, 0, 0.4);
}

.factor-value-card.positive {
  border-color: rgba(76, 175, 80, 0.4);
  background: linear-gradient(
    135deg,
    rgba(76, 175, 80, 0.15) 0%,
    rgba(0, 0, 0, 0.3) 100%
  );
}

.factor-value-card.positive:hover {
  border-color: rgba(76, 175, 80, 0.6);
  box-shadow: 0 0 15px rgba(76, 175, 80, 0.15);
}

.factor-value-card.negative {
  border-color: rgba(239, 83, 80, 0.4);
  background: linear-gradient(
    135deg,
    rgba(239, 83, 80, 0.15) 0%,
    rgba(0, 0, 0, 0.3) 100%
  );
}

.factor-value-card.negative:hover {
  border-color: rgba(239, 83, 80, 0.6);
  box-shadow: 0 0 15px rgba(239, 83, 80, 0.15);
}

.factor-value-card.neutral {
  border-color: rgba(158, 158, 158, 0.3);
}

.factor-value-card.learned {
  box-shadow: inset 0 0 0 1px rgba(255, 193, 7, 0.3);
}

.factor-value-card.learned::before {
  content: none;
}

.factor-value-header {
  display: contents;
}

.factor-label {
  font-size: 0.82rem;
  font-weight: 500;
  color: rgba(255, 255, 255, 0.85);
  white-space: nowrap;
}

.learned-badge {
  display: none; /* Using ::before instead */
}

.factor-value-body {
  display: contents;
}

.factor-multiplier {
  font-size: 0.82rem;
  font-weight: 700;
  padding: 4px 10px;
  border-radius: 12px;
  background: rgba(0, 0, 0, 0.3);
  color: rgba(255, 255, 255, 0.9);
}

.factor-value-card.positive .factor-multiplier {
  color: #81c784;
  background: rgba(76, 175, 80, 0.25);
}

.factor-value-card.negative .factor-multiplier {
  color: #ef9a9a;
  background: rgba(239, 83, 80, 0.25);
}

/* Factor weights container */
.factor-weights {
  display: flex;
  flex-direction: column;
  align-items: flex-end;
  gap: 2px;
}

/* Factor weight - compact inline display */
.factor-weight {
  font-size: 0.6rem;
  font-family: "SF Mono", "Monaco", monospace;
  opacity: 0.6;
  margin-left: 4px;
}

.factor-weight::before {
  content: "×";
}

.factor-raw {
  font-size: 0.72rem;
  color: rgba(255, 255, 255, 0.4);
  font-family: "SF Mono", "Monaco", monospace;
}

.factor-value-footer {
  display: none; /* Hide footer in pill design for cleaner look */
}

.default-value,
.samples-count {
  display: none;
}

@media (max-width: 600px) {
  .factor-values-grid {
    gap: 6px;
  }

  .all-factors-header {
    padding: 14px 16px;
  }

  .factors-stats {
    display: none;
  }

  .factor-value-card {
    padding: 6px 10px;
    font-size: 0.78rem;
  }

  .factor-label {
    font-size: 0.75rem;
  }

  .factor-multiplier {
    font-size: 0.78rem;
    padding: 2px 8px;
  }

  .factor-raw {
    display: none;
  }
}

/* ============================================
   UI Enhancements - Subtle Improvements
   ============================================ */

/* Focus States for Accessibility */
.day-btn:focus-visible,
.coming-soon-tab:focus-visible,
.refresh-btn:focus-visible,
.ai-insights-btn:focus-visible,
button:focus-visible {
  outline: 2px solid var(--helios-red);
  outline-offset: 2px;
}

.movie-card:focus-within {
  box-shadow: 0 0 0 2px var(--helios-red);
}

/* Premium Skeleton Loader with Shimmer Effect */
.skeleton {
  background: linear-gradient(
    110deg,
    rgba(240, 240, 240, 0.9) 0%,
    rgba(255, 255, 255, 0.4) 40%,
    rgba(255, 255, 255, 0.8) 50%,
    rgba(255, 255, 255, 0.4) 60%,
    rgba(240, 240, 240, 0.9) 100%
  );
  background-size: 300% 100%;
  animation: skeleton-shimmer 1.8s ease-in-out infinite;
  border-radius: 10px;
  position: relative;
  overflow: hidden;
}

/* Glass-like overlay for depth */
.skeleton::before {
  content: "";
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: linear-gradient(
    135deg,
    rgba(255, 255, 255, 0.3) 0%,
    rgba(255, 255, 255, 0.1) 50%,
    rgba(255, 255, 255, 0.3) 100%
  );
  pointer-events: none;
}

[data-theme="dark"] .skeleton {
  background: linear-gradient(
    110deg,
    rgba(45, 45, 55, 0.95) 0%,
    rgba(80, 80, 100, 0.3) 40%,
    rgba(100, 100, 130, 0.5) 50%,
    rgba(80, 80, 100, 0.3) 60%,
    rgba(45, 45, 55, 0.95) 100%
  );
  background-size: 300% 100%;
}

[data-theme="dark"] .skeleton::before {
  background: linear-gradient(
    135deg,
    rgba(255, 255, 255, 0.08) 0%,
    rgba(255, 255, 255, 0.03) 50%,
    rgba(255, 255, 255, 0.08) 100%
  );
}

@keyframes skeleton-shimmer {
  0% {
    background-position: 200% center;
  }
  100% {
    background-position: -200% center;
  }
}

.skeleton-text {
  height: 1em;
  margin-bottom: 0.5em;
  border-radius: 6px;
}

.skeleton-title {
  height: 1.5em;
  width: 60%;
  margin-bottom: 0.75em;
  border-radius: 8px;
}

.skeleton-image {
  height: 160px;
  width: 110px;
  border-radius: 12px;
  box-shadow: 0 4px 15px rgba(0, 0, 0, 0.08);
}

/* Premium Skeleton Card Layout */
.skeleton-card {
  display: flex;
  gap: 16px;
  padding: 16px;
  background: linear-gradient(
    135deg,
    rgba(255, 255, 255, 0.8),
    rgba(248, 248, 250, 0.9)
  );
  border-radius: 16px;
  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.06);
  transition: opacity 0.3s ease;
}

[data-theme="dark"] .skeleton-card {
  background: linear-gradient(
    135deg,
    rgba(30, 32, 40, 0.9),
    rgba(35, 38, 48, 0.95)
  );
  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
}

.skeleton-card .movie-poster {
  flex-shrink: 0;
}

.skeleton-card .movie-info {
  flex: 1;
  display: flex;
  flex-direction: column;
}

/* Skeleton for screenings pills */
.skeleton-screenings {
  display: flex;
  gap: 8px;
  margin-top: 12px;
}

.skeleton-screenings .skeleton {
  border-radius: 20px;
}

/* Skeleton for histogram bars */
.skeleton-histogram-bar {
  border-radius: 6px 6px 0 0;
  transition: height 0.3s ease;
}

/* Skeleton banner */
.skeleton-banner {
  display: flex;
  align-items: center;
  gap: 16px;
  padding: 20px 24px;
  background: linear-gradient(
    135deg,
    rgba(255, 255, 255, 0.95),
    rgba(248, 250, 252, 0.98)
  );
  border-radius: 16px;
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.08);
}

[data-theme="dark"] .skeleton-banner {
  background: linear-gradient(
    135deg,
    rgba(30, 32, 40, 0.95),
    rgba(40, 42, 52, 0.98)
  );
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.4);
}

/* Skeleton for hall cards */
.skeleton-hall {
  background: linear-gradient(
    135deg,
    rgba(255, 255, 255, 0.9),
    rgba(248, 250, 252, 0.95)
  );
  border-radius: 16px;
  padding: 16px;
  box-shadow: 0 4px 16px rgba(0, 0, 0, 0.06);
}

[data-theme="dark"] .skeleton-hall {
  background: linear-gradient(
    135deg,
    rgba(30, 32, 40, 0.9),
    rgba(40, 42, 52, 0.95)
  );
  box-shadow: 0 4px 16px rgba(0, 0, 0, 0.3);
}

/* High Occupancy Alert Badge */
.alert-badge {
  display: inline-flex;
  align-items: center;
  gap: 4px;
  padding: 4px 10px;
  border-radius: 12px;
  font-size: 0.75rem;
  font-weight: 600;
  background: linear-gradient(135deg, #ff6b6b, #e63946);
  color: white;
  animation: pulse-alert 2s infinite;
}

.alert-badge .material-symbols-rounded {
  font-size: 14px;
}

@keyframes pulse-alert {
  0%,
  100% {
    opacity: 1;
    transform: scale(1);
  }
  50% {
    opacity: 0.8;
    transform: scale(1.02);
  }
}

/* Alert Settings Modal */
.alert-settings-modal {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: rgba(0, 0, 0, 0.5);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 1000;
  backdrop-filter: blur(4px);
}

.alert-settings-content {
  background: var(--bg-white);
  border-radius: 16px;
  padding: 24px;
  max-width: 360px;
  width: 90%;
  box-shadow: var(--shadow-lg);
}

.alert-settings-content h3 {
  margin: 0 0 16px;
  display: flex;
  align-items: center;
  gap: 8px;
}

.alert-threshold-input {
  display: flex;
  align-items: center;
  gap: 12px;
  margin: 16px 0;
}

.alert-threshold-input input[type="range"] {
  flex: 1;
  accent-color: var(--helios-red);
}

.alert-threshold-value {
  font-size: 1.5rem;
  font-weight: 700;
  color: var(--helios-red);
  min-width: 50px;
  text-align: center;
}

.alert-settings-btns {
  display: flex;
  gap: 12px;
  margin-top: 20px;
}

.alert-settings-btns button {
  flex: 1;
  padding: 12px;
  border-radius: 10px;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.2s;
}

.alert-settings-btns .save-btn {
  background: var(--helios-red);
  color: white;
  border: none;
}

.alert-settings-btns .cancel-btn {
  background: var(--bg-light);
  color: var(--text-dark);
  border: 1px solid var(--border-light);
}

/* Icon Hover Effects */
.material-symbols-rounded {
  transition: transform 0.2s ease, color 0.2s ease;
}

button:hover .material-symbols-rounded,
a:hover .material-symbols-rounded {
  transform: scale(1.1);
}

.refresh-btn:active .material-symbols-rounded {
  transform: rotate(180deg);
}

/* Section Spacing */
.collapsible-section {
  margin-bottom: 20px;
}

.section-title {
  margin-bottom: 16px;
  letter-spacing: -0.02em;
}

/* Enhanced Badges */
.movie-badge {
  transition: transform 0.2s ease, box-shadow 0.2s ease;
}

.movie-badge:hover {
  transform: translateY(-1px);
}

.movie-badge.premiere {
  background: linear-gradient(135deg, #ff6b6b 0%, #ee5a24 100%);
  color: white;
}

.movie-badge.popular {
  background: linear-gradient(135deg, #ffd93d 0%, #f39c12 100%);
  color: #333;
}

/* Typography Improvements */
h1,
h2,
h3 {
  letter-spacing: -0.02em;
}

.prediction-value {
  font-feature-settings: "tnum" 1;
}

/* Button Micro-interactions */
.coming-soon-tab:active,
.day-btn:active {
  transform: scale(0.97);
}

.ai-insights-btn:hover {
  transform: translateY(-1px);
}

.ai-insights-btn:active {
  transform: translateY(0);
}

/* Smooth Dividers */
.section-divider {
  height: 1px;
  background: linear-gradient(
    90deg,
    transparent 0%,
    var(--border-color) 20%,
    var(--border-color) 80%,
    transparent 100%
  );
  margin: 24px 0;
}

/* Session Time Chip Improvements */
.session-time {
  transition: all 0.2s ease;
}

.session-time:hover {
  transform: translateY(-1px);
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.12);
}

/* History Tab Animation */
.history-tab,
.coming-soon-tab {
  transition: all 0.25s cubic-bezier(0.4, 0, 0.2, 1);
}

/* Insight Card Type Colors */
.ai-insight-card[data-type="verification"] {
  border-left: 3px solid #10b981;
}

.ai-insight-card[data-type="correction"] {
  border-left: 3px solid #f59e0b;
}

.ai-insight-card[data-type="prediction"] {
  border-left: 3px solid #6366f1;
}

/* Loading Spinner Enhancement */
.loader-spinner {
  animation: loaderSpin 0.8s linear infinite;
}

/* Pulse Animation for Loading Elements */
.pulse {
  animation: pulse-animation 2s ease-in-out infinite;
}

@keyframes pulse-animation {
  0%,
  100% {
    opacity: 1;
  }
  50% {
    opacity: 0.6;
  }
}

/* Smooth Scroll Behavior */
html {
  scroll-behavior: smooth;
}

@media (prefers-reduced-motion: reduce) {
  html {
    scroll-behavior: auto;
  }

  *,
  *::before,
  *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
  }
}

/* ============================================
   Advanced UI/UX Components
   ============================================ */

/* Toast Notification System */
.toast-container {
  position: fixed;
  top: 70px;
  right: 16px;
  z-index: 9999;
  display: flex;
  flex-direction: column;
  gap: 8px;
  pointer-events: none;
}

.toast {
  display: flex;
  align-items: center;
  gap: 10px;
  padding: 12px 16px;
  background: #1f2937;
  color: white;
  border-radius: 10px;
  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.25);
  font-size: 0.875rem;
  font-weight: 500;
  pointer-events: auto;
  animation: toast-slide-in 0.3s ease-out;
  max-width: 320px;
}

.toast.success {
  background: linear-gradient(135deg, #059669 0%, #047857 100%);
}

.toast.error {
  background: linear-gradient(135deg, #dc2626 0%, #b91c1c 100%);
}

.toast.warning {
  background: linear-gradient(135deg, #d97706 0%, #b45309 100%);
}

.toast.info {
  background: linear-gradient(135deg, #2563eb 0%, #1d4ed8 100%);
}

.toast .material-symbols-rounded {
  font-size: 20px;
  flex-shrink: 0;
}

.toast.hiding {
  animation: toast-slide-out 0.3s ease-in forwards;
}

@keyframes toast-slide-in {
  from {
    transform: translateX(100%);
    opacity: 0;
  }
  to {
    transform: translateX(0);
    opacity: 1;
  }
}

@keyframes toast-slide-out {
  from {
    transform: translateX(0);
    opacity: 1;
  }
  to {
    transform: translateX(100%);
    opacity: 0;
  }
}

/* Empty States */
.empty-state {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  padding: 48px 24px;
  text-align: center;
  color: var(--text-muted);
}

.empty-state .material-symbols-rounded {
  font-size: 56px;
  opacity: 0.4;
  margin-bottom: 16px;
}

.empty-state h3 {
  font-size: 1.1rem;
  font-weight: 600;
  color: var(--text-dark);
  margin: 0 0 8px 0;
}

.empty-state p {
  font-size: 0.875rem;
  margin: 0;
  max-width: 280px;
}

/* Section Count Badge */
.section-count {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  min-width: 24px;
  height: 24px;
  padding: 0 8px;
  background: rgba(0, 0, 0, 0.08);
  border-radius: 12px;
  font-size: 0.75rem;
  font-weight: 700;
  color: var(--text-muted);
  margin-left: 8px;
}

[data-theme="dark"] .section-count {
  background: rgba(255, 255, 255, 0.1);
}

/* Truncated Text with Tooltip */
.truncate-tooltip {
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  cursor: default;
}

.truncate-tooltip:hover {
  position: relative;
}

/* Dark Mode Smooth Transition */
body,
.day-picker-wrapper,
.header,
.movie-card,
.hall-card,
.prediction-banner,
.collapsible-section {
  transition: background-color 0.3s ease, border-color 0.3s ease,
    color 0.3s ease;
}

/* Timeline Progress Indicator */
.timeline-progress {
  display: flex;
  align-items: center;
  gap: 12px;
  padding: 12px 16px;
  background: var(--bg-card);
  border-radius: 10px;
  margin-bottom: 16px;
  border: 1px solid var(--border-color);
}

.timeline-progress-bar {
  flex: 1;
  height: 8px;
  background: var(--border-color);
  border-radius: 4px;
  overflow: hidden;
}

.timeline-progress-fill {
  height: 100%;
  background: linear-gradient(90deg, #00d4ff 0%, #00a3cc 100%);
  border-radius: 4px;
  transition: width 0.5s ease;
}

.timeline-progress-text {
  font-size: 0.8rem;
  font-weight: 600;
  color: var(--text-muted);
  white-space: nowrap;
}

/* Floating Day Badge */
.floating-day-badge {
  position: fixed;
  bottom: 24px;
  left: 50%;
  transform: translateX(-50%) translateY(100px);
  background: var(--helios-red);
  color: white;
  padding: 10px 20px;
  border-radius: 24px;
  font-weight: 600;
  font-size: 0.875rem;
  box-shadow: 0 4px 20px rgba(211, 47, 47, 0.4);
  z-index: 100;
  opacity: 0;
  transition: transform 0.3s ease, opacity 0.3s ease;
  pointer-events: none;
}

.floating-day-badge.visible {
  transform: translateX(-50%) translateY(0);
  opacity: 1;
}

/* Error State */
.error-state {
  display: flex;
  flex-direction: column;
  align-items: center;
  padding: 32px 24px;
  text-align: center;
  background: rgba(239, 68, 68, 0.05);
  border: 1px solid rgba(239, 68, 68, 0.2);
  border-radius: 12px;
}

.error-state .material-symbols-rounded {
  font-size: 48px;
  color: #ef4444;
  margin-bottom: 12px;
}

.error-state h3 {
  font-size: 1rem;
  font-weight: 600;
  color: var(--text-dark);
  margin: 0 0 8px 0;
}

.error-state p {
  font-size: 0.85rem;
  color: var(--text-muted);
  margin: 0 0 16px 0;
}

.error-state .retry-btn {
  display: inline-flex;
  align-items: center;
  gap: 6px;
  padding: 10px 20px;
  background: #ef4444;
  color: white;
  border: none;
  border-radius: 8px;
  font-weight: 600;
  font-size: 0.875rem;
  cursor: pointer;
  transition: background 0.2s ease;
}

.error-state .retry-btn:hover {
  background: #dc2626;
}

/* Animated Number Counter */
.animated-number {
  display: inline-block;
  transition: transform 0.3s ease;
}

.animated-number.updating {
  animation: number-bounce 0.4s ease;
}

@keyframes number-bounce {
  0%,
  100% {
    transform: scale(1);
  }
  50% {
    transform: scale(1.15);
  }
}

/* Pull to Refresh Indicator (mobile) */
.pull-refresh-indicator {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  height: 4px;
  background: linear-gradient(
    90deg,
    var(--helios-red) 0%,
    transparent 50%,
    var(--helios-red) 100%
  );
  background-size: 200% 100%;
  animation: pull-refresh-slide 1s linear infinite;
  z-index: 9999;
  opacity: 0;
  transition: opacity 0.2s ease;
}

.pull-refresh-indicator.visible {
  opacity: 1;
}

@keyframes pull-refresh-slide {
  0% {
    background-position: 200% 0;
  }
  100% {
    background-position: -200% 0;
  }
}

/* ============================================
   Premium Scrollbar
   ============================================ */

::-webkit-scrollbar {
  width: 10px;
  height: 10px;
}

::-webkit-scrollbar-track {
  background: rgba(0, 0, 0, 0.03);
  border-radius: 10px;
}

::-webkit-scrollbar-thumb {
  background: linear-gradient(180deg, #d32f2f 0%, #b71c1c 100%);
  border-radius: 10px;
  border: 2px solid transparent;
  background-clip: padding-box;
  transition: background 0.3s ease;
}

::-webkit-scrollbar-thumb:hover {
  background: linear-gradient(180deg, #e53935 0%, #c62828 100%);
  background-clip: padding-box;
}

::-webkit-scrollbar-corner {
  background: transparent;
}

/* Dark mode scrollbar */
[data-theme="dark"] ::-webkit-scrollbar-track {
  background: rgba(255, 255, 255, 0.03);
}

[data-theme="dark"] ::-webkit-scrollbar-thumb {
  background: linear-gradient(180deg, #ff5252 0%, #d32f2f 100%);
  background-clip: padding-box;
}

[data-theme="dark"] ::-webkit-scrollbar-thumb:hover {
  background: linear-gradient(180deg, #ff6e6e 0%, #e53935 100%);
  background-clip: padding-box;
}

/* Firefox scrollbar */
* {
  scrollbar-width: thin;
  scrollbar-color: #d32f2f transparent;
}

[data-theme="dark"] * {
  scrollbar-color: #ff5252 transparent;
}

/* Movie Trend Modal */
.movie-trend-modal {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: rgba(0, 0, 0, 0.6);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 9999;
  backdrop-filter: blur(6px);
  -webkit-backdrop-filter: blur(6px);
  animation: fadeIn 0.2s ease;
  padding: env(safe-area-inset-top) env(safe-area-inset-right)
    env(safe-area-inset-bottom) env(safe-area-inset-left);
}

@keyframes fadeIn {
  from {
    opacity: 0;
  }
  to {
    opacity: 1;
  }
}

.trend-modal-content {
  background: var(--bg-white);
  border-radius: 20px;
  max-width: 500px;
  width: 94%;
  max-height: 85vh;
  overflow: hidden;
  box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
  animation: slideUp 0.3s ease;
}

@keyframes slideUp {
  from {
    transform: translateY(30px);
    opacity: 0;
  }
  to {
    transform: translateY(0);
    opacity: 1;
  }
}

.trend-modal-header {
  background: linear-gradient(135deg, #e53935 0%, #c62828 100%);
  color: white;
  padding: 20px 24px;
  display: flex;
  justify-content: space-between;
  align-items: center;
}

.trend-modal-title {
  display: flex;
  align-items: center;
  gap: 14px;
}

.trend-modal-title .material-symbols-rounded {
  font-size: 32px;
  opacity: 0.9;
}

.trend-modal-title h3 {
  margin: 0;
  font-size: 1.1rem;
  font-weight: 600;
}

.trend-modal-subtitle {
  font-size: 0.8rem;
  opacity: 0.8;
}

.trend-close-btn {
  background: rgba(255, 255, 255, 0.15);
  border: none;
  border-radius: 50%;
  width: 36px;
  height: 36px;
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  transition: background 0.2s;
}

.trend-close-btn:hover {
  background: rgba(255, 255, 255, 0.25);
}

.trend-close-btn .material-symbols-rounded {
  color: white;
  font-size: 20px;
}

.trend-modal-body {
  padding: 20px 24px;
  max-height: 55vh;
  overflow-y: auto;
}

.trend-chart-section {
  margin-bottom: 24px;
}

.trend-section-header {
  display: flex;
  align-items: center;
  gap: 8px;
  font-weight: 600;
  font-size: 0.9rem;
  margin-bottom: 12px;
  color: var(--text-dark);
}

.trend-section-header .material-symbols-rounded {
  color: #e53935;
  font-size: 20px;
}

.trend-chart-wrapper {
  height: 180px;
  background: var(--bg-light);
  border-radius: 12px;
  padding: 12px;
}

.trend-similar-section h4 {
  display: flex;
  align-items: center;
  gap: 8px;
  font-size: 0.9rem;
  margin: 0 0 12px;
}

.trend-similar-section h4 .material-symbols-rounded {
  color: #e53935;
}

.trend-similar-item {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 12px 14px;
  background: var(--bg-light);
  border-radius: 10px;
  margin-bottom: 8px;
}

.trend-similar-item:last-child {
  margin-bottom: 0;
}

.trend-similar-title {
  font-size: 0.85rem;
  font-weight: 500;
}

.trend-similar-percent {
  font-size: 0.85rem;
  font-weight: 700;
  padding: 4px 10px;
  border-radius: 20px;
}

.trend-similar-percent.high {
  background: rgba(67, 160, 71, 0.15);
  color: #2e7d32;
}

.trend-similar-percent.medium {
  background: rgba(255, 152, 0, 0.15);
  color: #e65100;
}

.trend-similar-percent.low {
  background: rgba(229, 57, 53, 0.15);
  color: #c62828;
}

/* More Menu Dropdown */
.more-menu-wrapper {
  position: relative;
}

.more-menu-dropdown {
  position: absolute;
  top: 100%;
  right: 0;
  margin-top: 4px;
  background: var(--bg-white);
  border-radius: 12px;
  box-shadow: var(--shadow-lg);
  border: 1px solid var(--border-light);
  min-width: 140px;
  z-index: 100;
  overflow: hidden;
}

.more-menu-dropdown button {
  display: flex;
  align-items: center;
  gap: 10px;
  width: 100%;
  padding: 12px 16px;
  border: none;
  background: none;
  cursor: pointer;
  font-size: 0.85rem;
  color: var(--text-dark);
  transition: background 0.2s;
}

.more-menu-dropdown button:hover {
  background: var(--bg-light);
}

.more-menu-dropdown button .material-symbols-rounded {
  font-size: 18px;
  color: var(--helios-red);
}

/* ===================== */
/* CALENDAR MODAL STYLES */
/* ===================== */
.calendar-modal {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: rgba(0, 0, 0, 0.5);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 1000;
  backdrop-filter: blur(4px);
}

.calendar-modal-content {
  background: var(--bg-white);
  border-radius: 16px;
  padding: 20px;
  max-width: 420px;
  width: 95%;
  box-shadow: var(--shadow-lg);
}

@media (max-width: 450px) {
  .calendar-modal-content {
    padding: 14px;
    max-width: 360px;
  }

  .calendar-header h3 {
    font-size: 0.95rem;
  }

  .calendar-day {
    font-size: 0.75rem;
  }

  .calendar-day .day-occ {
    font-size: 0.55rem;
  }
}

.calendar-header {
  display: flex;
  align-items: center;
  gap: 12px;
  margin-bottom: 16px;
}

.calendar-title-btn {
  flex: 1;
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 4px;
  background: none;
  border: none;
  cursor: pointer;
  font-size: 1.1rem;
  font-weight: 600;
  color: var(--text-dark);
  padding: 6px 12px;
  border-radius: 8px;
  transition: background 0.2s;
}

.calendar-title-btn:hover {
  background: var(--bg-light);
}

.calendar-title-btn .material-symbols-rounded {
  font-size: 18px;
  color: var(--text-muted);
}

.calendar-nav-btn {
  background: var(--bg-light);
  border: 1px solid var(--border-light);
  border-radius: 8px;
  padding: 6px;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
}

.calendar-nav-btn:hover {
  background: var(--helios-red);
  color: white;
  border-color: var(--helios-red);
}

/* Month Picker Dropdown */
.month-picker-dropdown {
  background: var(--bg-white);
  border: 1px solid var(--border-light);
  border-radius: 12px;
  padding: 12px;
  margin-bottom: 16px;
  box-shadow: var(--shadow-md);
}

.year-nav {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 16px;
  margin-bottom: 12px;
  font-weight: 600;
}

.year-nav-btn {
  background: var(--bg-light);
  border: none;
  border-radius: 6px;
  padding: 4px 8px;
  cursor: pointer;
  display: flex;
  align-items: center;
}

.year-nav-btn:hover {
  background: var(--helios-red);
  color: white;
}

.month-grid {
  display: grid;
  grid-template-columns: repeat(4, 1fr);
  gap: 6px;
}

.month-grid button {
  padding: 8px 4px;
  border: none;
  border-radius: 8px;
  background: var(--bg-light);
  cursor: pointer;
  font-size: 0.8rem;
  transition: all 0.2s;
}

.month-grid button:hover {
  background: var(--helios-red);
  color: white;
}

.month-grid button.current {
  background: var(--helios-red);
  color: white;
}

.calendar-weekdays {
  display: grid;
  grid-template-columns: repeat(7, 1fr);
  text-align: center;
  font-size: 0.75rem;
  font-weight: 600;
  color: var(--text-muted);
  margin-bottom: 8px;
}

.calendar-grid {
  display: grid;
  grid-template-columns: repeat(7, 1fr);
  gap: 4px;
}

.calendar-day {
  width: 40px;
  height: 40px;
  padding: 0;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  border-radius: 10px;
  font-size: 0.8rem;
  font-weight: 500;
  cursor: pointer;
  transition: all 0.15s ease;
  position: relative;
  background: var(--bg-light);
}

.calendar-day:hover {
  transform: scale(1.05);
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.12);
  background: var(--bg-tertiary);
}

.calendar-day.empty {
  background: transparent;
  cursor: default;
}

.calendar-day.empty:hover {
  transform: none;
  box-shadow: none;
}

.calendar-day.today {
  border: 2px solid var(--helios-red);
}

.calendar-day .day-num {
  font-weight: 600;
}

.calendar-day .day-occ {
  font-size: 0.6rem;
  opacity: 0.8;
}

.calendar-day.low {
  background: linear-gradient(135deg, #e8f5e9, #c8e6c9);
  color: #2e7d32;
}

.calendar-day.medium {
  background: linear-gradient(135deg, #fff3e0, #ffe0b2);
  color: #ef6c00;
}

.calendar-day.high {
  background: linear-gradient(135deg, #ffebee, #ffcdd2);
  color: #c62828;
}

.calendar-day.no-data {
  background: var(--bg-light);
  color: var(--text-muted);
  opacity: 0.5;
}

.calendar-legend {
  display: flex;
  justify-content: center;
  gap: 12px;
  margin-top: 16px;
  font-size: 0.7rem;
  color: var(--text-muted);
}

.legend-dot {
  display: inline-block;
  width: 10px;
  height: 10px;
  border-radius: 3px;
  margin-right: 4px;
}

.legend-dot.low {
  background: #81c784;
}
.legend-dot.medium {
  background: #ffb74d;
}
.legend-dot.high {
  background: #e57373;
}
.legend-dot.no-data {
  background: #bdbdbd;
}

.calendar-day.selected {
  background: var(--helios-red) !important;
  color: white !important;
  font-weight: 600;
  box-shadow: 0 4px 16px rgba(227, 6, 19, 0.35);
  transform: scale(1.02);
}

/* Calendar Day Preview */
.calendar-day-preview {
  margin-top: 16px;
  padding: 16px;
  background: linear-gradient(135deg, #fff5f5 0%, #ffebee 100%);
  border-radius: 12px;
  border: 1px solid rgba(229, 57, 53, 0.15);
}

.preview-header {
  display: flex;
  align-items: center;
  gap: 8px;
  font-weight: 600;
  font-size: 0.95rem;
  margin-bottom: 12px;
  color: #c62828;
}

.preview-header .material-symbols-rounded {
  font-size: 20px;
}

.preview-stats {
  display: flex;
  justify-content: space-around;
  margin-bottom: 16px;
}

.preview-stat {
  text-align: center;
}

.preview-value {
  display: block;
  font-size: 1.4rem;
  font-weight: 700;
  color: #e53935;
}

.preview-label {
  font-size: 0.7rem;
  color: var(--text-muted);
  text-transform: uppercase;
}

.load-history-btn {
  width: 100%;
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 8px;
  padding: 12px;
  border: none;
  border-radius: 10px;
  background: linear-gradient(135deg, #e53935 0%, #c62828 100%);
  color: white;
  font-size: 0.9rem;
  font-weight: 600;
  cursor: pointer;
  transition: transform 0.2s, box-shadow 0.2s;
}

.load-history-btn:hover {
  transform: translateY(-2px);
  box-shadow: 0 4px 12px rgba(229, 57, 53, 0.4);
}

.load-history-btn .material-symbols-rounded {
  font-size: 18px;
}

/* ===================== */
/* HEATMAP STYLES        */
/* ===================== */
.heatmap-section {
  margin-top: 24px;
}

.heatmap-container {
  overflow-x: auto;
  padding: 16px;
  background: var(--bg-white);
  border-radius: 12px;
  box-shadow: var(--shadow-sm);
}

.heatmap-grid {
  display: grid;
  grid-template-columns: 80px repeat(13, 1fr);
  gap: 2px;
  min-width: 500px;
}

.heatmap-header {
  font-size: 0.65rem;
  text-align: center;
  color: var(--text-muted);
  padding: 4px 0;
}

.heatmap-day-label {
  font-size: 0.75rem;
  font-weight: 600;
  display: flex;
  align-items: center;
  padding-right: 8px;
  color: var(--text-dark);
}

.heatmap-cell {
  aspect-ratio: 1;
  border-radius: 3px;
  min-width: 16px;
  min-height: 16px;
  transition: transform 0.1s;
}

.heatmap-cell:hover {
  transform: scale(1.3);
  z-index: 10;
  position: relative;
}

/* Heatmap color scale (0-100%) */
.heatmap-cell.level-0 {
  background: #f5f5f5;
}
.heatmap-cell.level-1 {
  background: #c8e6c9;
}
.heatmap-cell.level-2 {
  background: #a5d6a7;
}
.heatmap-cell.level-3 {
  background: #81c784;
}
.heatmap-cell.level-4 {
  background: #fff59d;
}
.heatmap-cell.level-5 {
  background: #ffcc80;
}
.heatmap-cell.level-6 {
  background: #ffab91;
}
.heatmap-cell.level-7 {
  background: #ef9a9a;
}
.heatmap-cell.level-8 {
  background: #e57373;
}
.heatmap-cell.level-9 {
  background: #ef5350;
}
.heatmap-cell.level-10 {
  background: #f44336;
}

[data-theme="dark"] .heatmap-cell.level-0 {
  background: #2d2d2d;
}

.heatmap-legend {
  display: flex;
  justify-content: center;
  align-items: center;
  gap: 4px;
  margin-top: 12px;
  font-size: 0.7rem;
  color: var(--text-muted);
}

.heatmap-legend-bar {
  display: flex;
  border-radius: 3px;
  overflow: hidden;
}

.heatmap-legend-bar span {
  width: 16px;
  height: 12px;
}

/* Scroll to Top Button (mobile only) */
.scroll-to-top-btn {
  position: fixed;
  bottom: 24px;
  right: 24px;
  width: 48px;
  height: 48px;
  border-radius: 50%;
  background: var(--helios-red);
  color: white;
  border: none;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.25);
  cursor: pointer;
  z-index: 1000;
  display: flex;
  align-items: center;
  justify-content: center;
  opacity: 0;
  transform: translateY(20px) scale(0.8);
  pointer-events: none;
  transition: opacity 0.3s ease, transform 0.3s ease;
}

.scroll-to-top-btn:hover {
  transform: translateY(0) scale(1.1);
}

.scroll-to-top-btn .material-symbols-rounded {
  font-size: 24px;
}

/* Only show on mobile when visible class is added */
@media (max-width: 768px) {
  .scroll-to-top-btn.visible {
    opacity: 1;
    transform: translateY(0) scale(1);
    pointer-events: auto;
  }
}

/* ============================================
   Timeline Controls & Sorting UI
   ============================================ */
.timeline-controls {
  display: flex;
  align-items: center;
  gap: 8px;
  margin-left: auto;
}

.sort-switch {
  display: flex;
  background: rgba(255, 255, 255, 0.1);
  border-radius: 8px;
  padding: 2px;
  gap: 2px;
  border: 1px solid rgba(0, 0, 0, 0.05);
}

.sort-btn {
  background: transparent;
  border: none;
  color: var(--text-muted);
  padding: 4px 12px;
  border-radius: 6px;
  font-size: 0.75rem;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.2s ease;
}

.sort-btn:hover {
  color: var(--text-body);
  background: rgba(255, 255, 255, 0.05);
}

.sort-btn.active {
  background: white;
  color: var(--helios-red);
  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
}

/* Dark mode adjustments for switch */
[data-theme="dark"] .sort-switch {
  background: rgba(0, 0, 0, 0.2);
  border-color: rgba(255, 255, 255, 0.05);
}

[data-theme="dark"] .sort-btn.active {
  background: #2d3345;
  color: white; /* Or red accent if preferred */
  color: var(--helios-red);
}

/* Timeline Time - Start vs End Mode */
.timeline-main-time {
  font-size: 1.1rem;
  font-weight: 700;
  display: block;
  line-height: 1.2;
}

.timeline-main-time.is-end {
  color: var(--helios-red); /* Highlight end time */
}

.timeline-sub-time {
  font-size: 0.7rem;
  color: var(--text-muted);
  font-weight: 500;
  display: block;
  margin-top: 2px;
}

/* Original styles adjustment */
.timeline-time {
  width: 60px;
  text-align: left; /* Changed from right to left */
  flex-shrink: 0;
  font-size: 1.1rem;
  font-weight: 700;
  line-height: 1.2;
  color: var(--text-dark);
}

.timeline-time.end-mode {
  display: flex;
  flex-direction: column;
  align-items: flex-start; /* Changed from flex-end to flex-start */
  justify-content: center;
}

/* Use previously defined classes but ensure overrides works */
/* Mobile adjustments */
@media (max-width: 480px) {
  .timeline-controls {
    margin-left: auto;
  }
}

/* --- Custom Picker Widgets --- */
.custom-picker-wrapper {
  position: relative;
  display: inline-block;
  font-family: "Outfit", sans-serif;
  margin-left: 8px;
}

.custom-picker-trigger {
  background: white;
  border: 1px solid #e2e8f0;
  border-radius: 24px;
  padding: 10px 20px;
  color: #1e293b;
  font-size: 0.9rem;
  font-weight: 500;
  cursor: pointer;
  transition: all 0.2s;
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.03);
  display: flex;
  align-items: center;
  gap: 8px;
  user-select: none;
  min-width: 140px;
  justify-content: space-between;
}

/* ... (keep other styles same) ... */

.calendar-grid {
  display: grid;
  grid-template-columns: repeat(7, 1fr);
  gap: 4px 0; /* Remove horizontal gap for range */
  text-align: center;
}

/* ... */

.calendar-day {
  aspect-ratio: 1;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 0.85rem;
  color: #334155;
  border-radius: 10px;
  cursor: pointer;
  transition: all 0.15s ease;
  margin: 2px;
  position: relative;
  z-index: 1;
  border: 2px solid transparent;
}

.calendar-day:hover {
  background-color: #f1f5f9;
  color: #0f172a;
  z-index: 2;
  transform: scale(1.02);
}

.calendar-day.in-range {
  background-color: rgba(220, 38, 38, 0.08);
  color: #1e293b;
  border-radius: 10px;
}

.calendar-day.in-range:first-of-type {
  border-top-left-radius: 10px;
  border-bottom-left-radius: 10px;
}
.calendar-day.in-range:last-of-type {
  border-top-right-radius: 10px;
  border-bottom-right-radius: 10px;
}

/* Specific start/end overrides */
.calendar-day.range-start {
  border-top-left-radius: 10px;
  border-bottom-left-radius: 10px;
  background-color: rgba(220, 38, 38, 0.08);
}
.calendar-day.selected {
  border: 2px solid var(--helios-red) !important;
  color: var(--helios-red);
  font-weight: 600;
  background: rgba(227, 6, 19, 0.08);
  border-radius: 10px;
  position: relative;
  z-index: 2;
}
/* Fix for selected being part of range visually */
.calendar-day.selected.range-end {
  border-radius: 8px;
}

.calendar-day.today {
  color: var(--helios-red);
  font-weight: 700;
  border: 1px solid rgba(220, 38, 38, 0.2);
}
.calendar-day.today.selected {
  color: white;
  border: none;
}
.calendar-day.today.in-range {
  border: none;
}

.custom-picker-trigger:hover,
.custom-picker-trigger.active {
  background-color: #f8fafc;
  border-color: #cbd5e1;
}

.custom-picker-trigger .material-symbols-rounded {
  font-size: 18px;
  color: #64748b;
}

/* Dropdown/Popup Common */
.custom-picker-popup {
  position: absolute;
  top: calc(100% + 8px);
  right: 0;
  background: white;
  border-radius: 16px;
  box-shadow: 0 10px 25px -5px rgba(0, 0, 0, 0.1),
    0 8px 10px -6px rgba(0, 0, 0, 0.1);
  border: 1px solid #e2e8f0;
  z-index: 50;
  min-width: 280px;
  padding: 16px;
  display: none;
  animation: fadeInPop 0.2s ease-out;
}
.custom-picker-popup.open {
  display: block;
}

.custom-year-dropdown {
  min-width: 120px;
  padding: 8px;
  right: auto;
  left: 0;
}

@keyframes fadeInPop {
  from {
    opacity: 0;
    transform: translateY(-10px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.custom-option {
  padding: 8px 12px;
  border-radius: 8px;
  cursor: pointer;
  color: #334155;
  font-weight: 500;
  transition: all 0.15s;
  text-align: center;
  margin-bottom: 2px;
}
.custom-option:hover {
  background-color: #f1f5f9;
  color: #0f172a;
}
.custom-option.selected {
  background-color: var(--helios-red);
  color: white;
}

.calendar-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 16px;
  padding: 0 4px;
}

.calendar-nav-btn {
  background: none;
  border: 1px solid #e2e8f0;
  color: #64748b;
  cursor: pointer;
  padding: 6px;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: all 0.2s;
}
.calendar-nav-btn:hover {
  background-color: #f1f5f9;
  border-color: #cbd5e1;
  color: #1e293b;
}

.calendar-current-month {
  font-weight: 600;
  color: #1e293b;
  text-transform: capitalize;
  font-size: 0.95rem;
}

.calendar-grid {
  display: grid;
  grid-template-columns: repeat(7, 1fr);
  gap: 2px 0;
  text-align: center;
  margin-top: 8px;
}

.calendar-day-label {
  font-size: 0.75rem;
  color: #94a3b8;
  font-weight: 600;
  padding-bottom: 8px;
}

.calendar-day {
  width: 100%;
  height: 36px; /* Fixed height for consistency */
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 0.85rem;
  color: #334155;
  cursor: pointer;
  position: relative;
  z-index: 1;
  border-radius: 0;
}

/* The Circle Indicator (Hover / Selected) */
.calendar-day::after {
  content: "";
  position: absolute;
  width: 32px;
  height: 32px;
  border-radius: 50%;
  z-index: -1;
  transition: background-color 0.2s;
}

.calendar-day:hover::after {
  background-color: #f1f5f9;
}

/* Range Strip Styling */
.calendar-day.in-range {
  background-color: rgba(220, 38, 38, 0.1);
}

.calendar-day.in-range.range-start {
  border-top-left-radius: 8px;
  border-bottom-left-radius: 8px;
}

.calendar-day.in-range.selected {
  border-top-right-radius: 8px;
  border-bottom-right-radius: 8px;
}

/* Selected State */
.calendar-day.selected {
  background-color: var(--helios-red);
  color: white;
  font-weight: 600;
  border-radius: 8px;
}

/* Range Start */
.calendar-day.range-start {
  color: var(--helios-red);
  font-weight: 600;
  background-color: rgba(220, 38, 38, 0.15);
  border-radius: 8px;
}

/* Today indicator */
.calendar-day.today {
  color: var(--helios-red);
  font-weight: 700;
}

.calendar-day.today.selected {
  color: white;
}

/* Empty days */
.calendar-day.empty {
  cursor: default;
  pointer-events: none;
}

/* Settings Modal */
.settings-modal {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: rgba(0, 0, 0, 0.7);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 1000;
  backdrop-filter: blur(4px);
  opacity: 0;
  animation: fadeIn 0.3s forwards;
}

.settings-modal-content {
  background: var(--bg-card);
  width: 90%;
  max-width: 500px;
  border-radius: 24px;
  box-shadow: 0 10px 40px rgba(0, 0, 0, 0.3);
  overflow: hidden;
  transform: scale(0.9);
  animation: scaleIn 0.3s forwards;
}

.settings-header {
  padding: 20px 24px;
  background: var(--header-bg);
  display: flex;
  align-items: center;
  justify-content: space-between;
  border-bottom: 1px solid var(--border-color);
}

.settings-header h3 {
  margin: 0;
  font-size: 1.2rem;
  font-weight: 600;
}

.settings-body {
  padding: 24px;
  display: flex;
  flex-direction: column;
  gap: 24px;
}

.setting-group {
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.setting-group label {
  font-weight: 500;
  font-size: 0.95rem;
  color: var(--text-dark);
}

.range-control {
  display: flex;
  align-items: center;
  gap: 16px;
}

.range-control input {
  flex: 1;
  accent-color: var(--helios-red);
  height: 6px;
}

.range-control span {
  min-width: 60px;
  text-align: right;
  font-weight: 600;
  color: var(--helios-red);
}

.setting-desc {
  font-size: 0.8rem;
  color: var(--text-muted);
  margin: 0;
  line-height: 1.4;
}

.setting-select {
  width: 100%;
  padding: 10px 12px;
  border-radius: 12px;
  border: 1px solid var(--border-color);
  background: var(--bg-color);
  color: var(--text-dark);
  font-size: 0.95rem;
  outline: none;
}

.settings-footer {
  padding: 16px 24px;
  border-top: 1px solid var(--border-color);
  display: flex;
  justify-content: flex-end;
}

.save-settings-btn {
  background: var(--helios-red);
  color: white;
  border: none;
  padding: 10px 24px;
  border-radius: 12px;
  font-weight: 600;
  cursor: pointer;
  transition: filter 0.2s;
}

.save-settings-btn:hover {
  filter: brightness(1.1);
}

/* Finished Room Status */
.hall-card.finished {
  border-left-color: var(--text-muted);
  opacity: 0.8;
}

.hall-status-label.finished {
  color: var(--text-dark);
  background: rgba(128, 128, 128, 0.2);
}

.hall-movie.finished .hall-movie-title {
  color: var(--text-muted);
  text-decoration: line-through;
}

/* ================================================
   MOVIE LIBRARY STYLES
   ================================================ */

.movie-library-section {
  padding: 0 16px 24px;
}

.movie-library-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 16px;
  padding: 16px 0;
  border-bottom: 1px solid var(--border-color);
}

.movie-library-header h2 {
  margin: 0;
  display: flex;
  align-items: center;
  gap: 8px;
  font-size: 1.5rem;
  font-weight: 600;
}

.movie-library-header h2 .material-symbols-rounded {
  color: var(--helios-red);
}

.close-library-btn {
  background: var(--bg-card);
  border: 1px solid var(--border-color);
  border-radius: 50%;
  width: 40px;
  height: 40px;
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  transition: all 0.2s;
}

.close-library-btn:hover {
  background: var(--helios-red);
  color: white;
  border-color: var(--helios-red);
}

.movie-library-controls {
  display: flex;
  gap: 12px;
  flex-wrap: wrap;
  margin-bottom: 16px;
}

.library-search-wrapper {
  flex: 1;
  min-width: 200px;
  position: relative;
  display: flex;
  align-items: center;
}

.library-search-wrapper .material-symbols-rounded {
  position: absolute;
  left: 12px;
  color: var(--text-muted);
  font-size: 20px;
}

.library-search-wrapper input {
  width: 100%;
  padding: 12px 12px 12px 44px;
  border: 1px solid var(--border-color);
  border-radius: 12px;
  background: var(--bg-card);
  color: var(--text-dark);
  font-size: 0.95rem;
}

.library-search-wrapper input:focus {
  outline: none;
  border-color: var(--helios-red);
  box-shadow: 0 0 0 3px rgba(229, 9, 20, 0.1);
}

.library-filters {
  display: flex;
  gap: 8px;
}

.library-filters select {
  padding: 12px 32px 12px 16px;
  border: 1px solid var(--border-color);
  border-radius: 12px;
  background: var(--bg-card);
  color: var(--text-dark);
  font-size: 0.9rem;
  cursor: pointer;
  appearance: none;
  background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='%23888' viewBox='0 0 24 24'%3E%3Cpath d='M7 10l5 5 5-5z'/%3E%3C/svg%3E");
  background-repeat: no-repeat;
  background-position: right 8px center;
  background-size: 18px;
}

.movie-library-stats {
  display: flex;
  gap: 24px;
  margin-bottom: 20px;
  padding: 12px 16px;
  background: var(--bg-card);
  border-radius: 12px;
  border: 1px solid var(--border-color);
}

.library-stat {
  display: flex;
  align-items: center;
  gap: 6px;
  font-size: 0.9rem;
  color: var(--text-body);
}

.library-stat .material-symbols-rounded {
  font-size: 18px;
  color: var(--helios-red);
}

.movie-library-grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(160px, 1fr));
  gap: 16px;
}

@media (min-width: 768px) {
  .movie-library-grid {
    grid-template-columns: repeat(auto-fill, minmax(180px, 1fr));
  }
}

.library-movie-card {
  background: var(--bg-card);
  border-radius: 16px;
  overflow: hidden;
  border: 1px solid var(--border-color);
  cursor: pointer;
  transition: all 0.2s;
}

.library-movie-card:hover {
  transform: translateY(-4px);
  box-shadow: 0 8px 24px rgba(0, 0, 0, 0.15);
  border-color: var(--helios-red);
}

.library-movie-poster {
  position: relative;
  aspect-ratio: 2/3;
  overflow: hidden;
}

.library-movie-poster img {
  width: 100%;
  height: 100%;
  object-fit: cover;
}

.library-movie-trend {
  position: absolute;
  top: 8px;
  right: 8px;
  width: 28px;
  height: 28px;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  background: rgba(0, 0, 0, 0.7);
  backdrop-filter: blur(4px);
}

.library-movie-trend .material-symbols-rounded {
  font-size: 18px;
}

.library-movie-trend.trend-up .material-symbols-rounded {
  color: #4caf50;
}

.library-movie-trend.trend-down .material-symbols-rounded {
  color: #f44336;
}

.library-movie-trend.trend-stable .material-symbols-rounded {
  color: #ff9800;
}

.library-movie-info {
  padding: 12px;
}

.library-movie-title {
  margin: 0 0 4px;
  font-size: 0.9rem;
  font-weight: 600;
  line-height: 1.3;
  display: -webkit-box;
  -webkit-line-clamp: 2;
  line-clamp: 2;
  -webkit-box-orient: vertical;
  overflow: hidden;
}

.library-movie-genres {
  margin: 0 0 8px;
  font-size: 0.75rem;
  color: var(--text-muted);
}

.library-movie-stats {
  display: flex;
  gap: 12px;
  margin-bottom: 6px;
}

.library-stat-item {
  display: flex;
  align-items: center;
  gap: 4px;
  font-size: 0.8rem;
  color: var(--text-body);
}

.library-stat-item .material-symbols-rounded {
  font-size: 14px;
}

.library-stat-item.occupancy-high {
  color: #4caf50;
}

.library-stat-item.occupancy-medium {
  color: #ff9800;
}

.library-stat-item.occupancy-low {
  color: #f44336;
}

.library-movie-meta {
  display: flex;
  gap: 8px;
  font-size: 0.75rem;
  color: var(--text-muted);
}

/* Poster Placeholder */
.poster-placeholder {
  width: 100%;
  height: 100%;
  display: flex;
  align-items: center;
  justify-content: center;
  background: linear-gradient(135deg, #2a2a2a 0%, #1a1a1a 100%);
  color: #666;
}

[data-theme="light"] .poster-placeholder,
.poster-placeholder {
  background: linear-gradient(135deg, #f3f4f6 0%, #e5e7eb 100%);
  color: #9ca3af;
}

[data-theme="dark"] .poster-placeholder {
  background: linear-gradient(135deg, #2a2a2a 0%, #1a1a1a 100%);
  color: #666;
}

.poster-placeholder .material-symbols-rounded {
  font-size: 48px;
}

/* Movie Detail Modal */
.movie-detail-modal {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: rgba(0, 0, 0, 0.85);
  backdrop-filter: blur(8px);
  z-index: 1100;
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 20px;
  box-sizing: border-box;
  overflow-y: auto;
}

.movie-detail-content {
  background: var(--bg-card);
  width: 100%;
  max-width: 800px;
  max-height: 90vh;
  border-radius: 24px;
  overflow-y: auto;
  position: relative;
  box-shadow: 0 20px 60px rgba(0, 0, 0, 0.4);
}

.movie-detail-content .modal-close {
  position: absolute;
  top: 16px;
  right: 16px;
  z-index: 10;
  background: rgba(0, 0, 0, 0.5);
  border: none;
  border-radius: 50%;
  width: 40px;
  height: 40px;
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  color: white;
  transition: all 0.2s;
}

.movie-detail-content .modal-close:hover {
  background: var(--helios-red);
}

.movie-detail-loading {
  padding: 60px;
  text-align: center;
}

.movie-detail-header {
  display: flex;
  gap: 24px;
  padding: 24px;
  background: linear-gradient(
    135deg,
    var(--bg-card) 0%,
    rgba(229, 9, 20, 0.05) 100%
  );
  border-bottom: 1px solid var(--border-color);
}

.movie-detail-poster {
  flex-shrink: 0;
  width: 150px;
  border-radius: 12px;
  overflow: hidden;
  box-shadow: 0 4px 16px rgba(0, 0, 0, 0.2);
}

.movie-detail-poster img {
  width: 100%;
  height: auto;
  display: block;
}

.movie-detail-info {
  flex: 1;
  min-width: 0;
}

.movie-detail-info h2 {
  margin: 0 0 8px;
  font-size: 1.5rem;
  font-weight: 700;
  line-height: 1.2;
}

.movie-detail-genres,
.movie-detail-director {
  display: flex;
  align-items: center;
  gap: 6px;
  margin: 0 0 6px;
  font-size: 0.9rem;
  color: var(--text-body);
}

.movie-detail-genres .material-symbols-rounded,
.movie-detail-director .material-symbols-rounded {
  font-size: 16px;
  color: var(--helios-red);
}

.movie-detail-meta {
  display: flex;
  flex-wrap: wrap;
  gap: 12px;
  margin: 12px 0;
  font-size: 0.85rem;
  color: var(--text-muted);
}

.movie-detail-meta span {
  display: flex;
  align-items: center;
  gap: 4px;
}

.movie-detail-description {
  margin: 12px 0 0;
  font-size: 0.9rem;
  color: var(--text-body);
  line-height: 1.5;
}

.movie-detail-stats-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(100px, 1fr));
  gap: 12px;
  padding: 20px 24px;
  background: var(--bg-page);
}

.movie-stat-card {
  background: var(--bg-card);
  padding: 16px;
  border-radius: 12px;
  text-align: center;
  border: 1px solid var(--border-color);
}

.movie-stat-card .stat-icon {
  display: block;
  margin-bottom: 8px;
}

.movie-stat-card .stat-icon .material-symbols-rounded {
  font-size: 24px;
  color: var(--text-muted);
}

.movie-stat-card .stat-value {
  display: block;
  font-size: 1.5rem;
  font-weight: 700;
  color: var(--text-dark);
}

.movie-stat-card .stat-label {
  display: block;
  font-size: 0.75rem;
  color: var(--text-muted);
  margin-top: 4px;
}

.movie-stat-card.occupancy-high .stat-value {
  color: #4caf50;
}

.movie-stat-card.occupancy-medium .stat-value {
  color: #ff9800;
}

.movie-stat-card.occupancy-low .stat-value {
  color: #f44336;
}

.movie-detail-charts {
  padding: 24px;
}

.chart-section {
  margin-bottom: 24px;
}

.chart-section h3 {
  display: flex;
  align-items: center;
  gap: 8px;
  margin: 0 0 12px;
  font-size: 1rem;
  font-weight: 600;
}

.chart-section h3 .material-symbols-rounded {
  font-size: 20px;
  color: var(--helios-red);
}

.chart-container {
  background: var(--bg-page);
  border-radius: 12px;
  padding: 16px;
}

/* Weekday Chart */
.weekday-chart {
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.weekday-bar-item {
  display: flex;
  align-items: center;
  gap: 12px;
}

.weekday-bar-item.weekend .weekday-label {
  color: var(--helios-red);
  font-weight: 600;
}

.weekday-label {
  width: 40px;
  font-size: 0.85rem;
  color: var(--text-body);
}

.weekday-bar-wrapper {
  flex: 1;
  height: 24px;
  background: var(--bg-page);
  border-radius: 12px;
  overflow: hidden;
}

.weekday-bar {
  height: 100%;
  background: linear-gradient(90deg, var(--helios-red) 0%, #ff4444 100%);
  border-radius: 12px;
  transition: width 0.5s ease-out;
}

.weekday-value {
  width: 50px;
  text-align: right;
  font-size: 0.85rem;
  font-weight: 500;
  color: var(--text-dark);
}

/* Similar Movies */
.similar-movies-list {
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.similar-movie-item {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 12px 16px;
  background: var(--bg-page);
  border-radius: 12px;
  cursor: pointer;
  transition: all 0.2s;
}

.similar-movie-item:hover {
  background: var(--bg-card);
  transform: translateX(4px);
}

.similar-movie-title {
  font-size: 0.9rem;
  font-weight: 500;
  flex: 1;
  min-width: 0;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

.similar-movie-stats {
  display: flex;
  gap: 12px;
  font-size: 0.85rem;
}

.similar-viewers {
  color: var(--text-muted);
}

.similar-occupancy {
  font-weight: 600;
}

.similar-occupancy.high {
  color: #4caf50;
}

.similar-occupancy.medium {
  color: #ff9800;
}

.similar-occupancy.low {
  color: #f44336;
}

/* Mobile Responsive */
@media (max-width: 600px) {
  .movie-detail-header {
    flex-direction: column;
    align-items: center;
    text-align: center;
  }

  .movie-detail-poster {
    width: 120px;
  }

  .movie-detail-genres,
  .movie-detail-director {
    justify-content: center;
  }

  .movie-detail-meta {
    justify-content: center;
  }

  .movie-detail-stats-grid {
    grid-template-columns: repeat(2, 1fr);
  }

  .library-filters {
    width: 100%;
  }

  .library-filters select {
    flex: 1;
  }
}

/* ================================================
   MORE DROPDOWN MENU
   ================================================ */

.more-menu-wrapper {
  position: relative;
  display: flex;
  align-items: center;
  margin-left: 8px;
}

.more-menu-btn {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 44px;
  height: 44px;
  border: 2px solid var(--helios-red);
  border-radius: 50%;
  background: white;
  color: var(--helios-red);
  cursor: pointer;
  transition: all 0.2s;
}

[data-theme="dark"] .more-menu-btn {
  background: #1e1e1e;
  border-color: var(--helios-red);
}

.more-menu-btn:hover {
  background: var(--helios-red);
  color: white;
}

.more-menu-btn .material-symbols-rounded {
  font-size: 26px;
  font-weight: 600;
}

.more-dropdown {
  position: absolute;
  top: calc(100% + 12px);
  right: 0;
  background: white;
  border: 1px solid #e5e7eb;
  border-radius: 16px;
  box-shadow: 0 10px 40px rgba(0, 0, 0, 0.2);
  min-width: 200px;
  overflow: hidden;
  z-index: 1000;
  animation: dropdownSlide 0.2s ease-out;
}

[data-theme="dark"] .more-dropdown {
  background: #1e1e1e;
  border-color: #333;
  box-shadow: 0 10px 40px rgba(0, 0, 0, 0.5);
}

@keyframes dropdownSlide {
  from {
    opacity: 0;
    transform: translateY(-10px) scale(0.95);
  }
  to {
    opacity: 1;
    transform: translateY(0) scale(1);
  }
}

.more-dropdown button {
  display: flex;
  align-items: center;
  gap: 14px;
  width: 100%;
  padding: 16px 20px;
  border: none;
  background: transparent;
  color: #1f2937;
  font-size: 1rem;
  font-weight: 500;
  cursor: pointer;
  text-align: left;
  transition: background 0.15s;
}

[data-theme="dark"] .more-dropdown button {
  color: #f3f4f6;
}

.more-dropdown button:hover {
  background: #f3f4f6;
}

[data-theme="dark"] .more-dropdown button:hover {
  background: #2a2a2a;
}

.more-dropdown button .material-symbols-rounded {
  font-size: 24px;
  color: var(--helios-red);
}

.more-dropdown button + button {
  border-top: 1px solid #e5e7eb;
}

[data-theme="dark"] .more-dropdown button + button {
  border-top-color: #333;
}

/* ================================================
   CUSTOM PICKER DROPDOWNS (Enhanced)
   ================================================ */

.custom-picker {
  position: relative;
  width: 100%; /* Ensure full width on mobile or adaptive */
}

/* Trigger Button */
.picker-trigger {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 8px;
  padding: 10px 16px;
  background: var(--bg-card);
  border: 1px solid var(--border-color);
  border-radius: 12px;
  font-size: 0.9rem;
  font-weight: 500;
  color: var(--text-dark);
  cursor: pointer;
  transition: all 0.2s;
  white-space: nowrap;
  width: 100%;
}

.picker-trigger:hover {
  border-color: var(--helios-red);
}

.custom-picker.active .picker-trigger {
  border-color: var(--helios-red);
  box-shadow: 0 0 0 3px rgba(227, 6, 19, 0.1);
}

.picker-trigger .material-symbols-rounded {
  font-size: 20px;
  color: var(--text-muted);
  transition: transform 0.2s;
}

.custom-picker.active .picker-trigger .material-symbols-rounded {
  transform: rotate(180deg);
  color: var(--helios-red);
}

/* Dropdown Container */
.picker-dropdown {
  position: absolute;
  top: calc(100% + 8px);
  left: 0;
  width: 100%;
  min-width: 240px; /* Ensure enough width for search/long text */
  background: var(--bg-card);
  border: 1px solid rgba(255, 255, 255, 0.1);
  border-radius: 12px;
  box-shadow: 0 10px 40px rgba(0, 0, 0, 0.4);
  opacity: 0;
  visibility: hidden;
  transform: translateY(-10px);
  transition: all 0.2s cubic-bezier(0.16, 1, 0.3, 1);
  z-index: 100;
  overflow: hidden;
  display: flex;
  flex-direction: column;
  max-height: 400px; /* Prevent overflow off screen */
}

.custom-picker.active .picker-dropdown {
  opacity: 1;
  visibility: visible;
  transform: translateY(0);
}

[data-theme="light"] .picker-dropdown {
  border-color: rgba(0, 0, 0, 0.1);
  box-shadow: 0 10px 40px rgba(0, 0, 0, 0.1);
  background: #ffffff;
}

/* Search Input inside Picker */
.picker-search {
  padding: 10px;
  border-bottom: 1px solid rgba(255, 255, 255, 0.1);
  background: inherit;
  position: sticky;
  top: 0;
  z-index: 2;
}

[data-theme="light"] .picker-search {
  border-bottom-color: rgba(0, 0, 0, 0.1);
}

.picker-search input {
  width: 100%;
  padding: 8px 12px;
  border-radius: 8px;
  border: 1px solid rgba(255, 255, 255, 0.1);
  background: var(--bg-page);
  color: var(--text-body);
  font-size: 0.85rem;
  outline: none;
  transition: all 0.2s;
}

[data-theme="light"] .picker-search input {
  border-color: rgba(0, 0, 0, 0.1);
  background: #f3f4f6;
  color: #1f2937;
}

.picker-search input:focus {
  border-color: var(--helios-red);
  box-shadow: 0 0 0 2px rgba(227, 6, 19, 0.1);
}

/* Options List Container */
.picker-options-list {
  padding: 4px;
  overflow-y: auto;
  max-height: 300px; /* Scrollable area */
}

/* Scrollbar styling */
.picker-options-list::-webkit-scrollbar {
  width: 4px;
}
.picker-options-list::-webkit-scrollbar-track {
  background: transparent;
}
.picker-options-list::-webkit-scrollbar-thumb {
  background: rgba(128, 128, 128, 0.3);
  border-radius: 4px;
}

/* Option Item */
.picker-option {
  width: 100%;
  display: flex;
  align-items: center;
  gap: 10px;
  padding: 10px 12px;
  border: none;
  background: transparent;
  color: var(--text-body);
  font-size: 0.9rem;
  cursor: pointer;
  border-radius: 8px;
  transition: all 0.15s;
  text-align: left;
  white-space: nowrap; /* Prevent wrapping if possible, but allow if needed? */
}

/* Allow wrapping for long genre names if needed, but flex gap handles it */

.picker-option:hover {
  background: rgba(255, 255, 255, 0.05);
  color: var(--text-dark);
}

[data-theme="light"] .picker-option:hover {
  background: #f3f4f6;
  color: #111;
}

/* Active/Selected Logic */
.picker-option.active,
.picker-option.selected {
  background: rgba(227, 6, 19, 0.05);
  color: var(--helios-red);
  font-weight: 500;
}

.picker-option .material-symbols-rounded {
  font-size: 20px;
  opacity: 0.7;
  color: var(--text-muted);
}

.picker-option.active .material-symbols-rounded,
.picker-option.selected .material-symbols-rounded {
  opacity: 1;
  color: var(--helios-red);
}

.picker-option + .picker-option {
  /* No top border for better list feel, relying on hover */
  border-top: none;
}

/* Checkbox Styles */
.picker-checkbox {
  width: 18px;
  height: 18px;
  border: 2px solid rgba(128, 128, 128, 0.5);
  border-radius: 4px;
  display: flex;
  align-items: center;
  justify-content: center;
  flex-shrink: 0;
  transition: all 0.2s;
}

.picker-option.selected .picker-checkbox {
  background: var(--helios-red);
  border-color: var(--helios-red);
}

.picker-checkbox i {
  font-size: 14px;
  color: white;
  display: none;
  font-weight: 700;
}

.picker-option.selected .picker-checkbox i {
  display: block;
}

/* Mobile responsive adjustments */
@media (max-width: 768px) {
  .library-filters {
    flex-direction: column;
    gap: 8px;
  }

  .custom-picker {
    width: 100%;
  }
}
